## üåê FieldForge Master Document ‚Äî Mycelial Task Network

**Purpose**: This is the **single living hub** for active work across the stack.  
Only **current, actionable flows** live here; everything else is archived in existing docs.

**Status Legend**: `TODO` ‚Üí `IN PROGRESS` ‚Üí `BLOCKED` (needs input) ‚Üí `DONE (REFERENCE)`

---

## üîÅ Active Flows

> Tasks that are currently being worked end-to-end. Keep this section lean.

| ID | Title | Status | Owner | Notes / Next Probe |
| --- | --- | --- | --- | --- |
---

## üß¨ TODO / Upcoming Work

> Clearly-scoped tasks that are **approved but not yet started**.

| ID | Title | Status | Owner | Notes / Entry Point |
| --- | --- | --- | --- | --- |
| MF-4 | Demo Login & Project Creation Flow (Frontend ‚Üí Backend ‚Üí DB) | TODO | Mycelial Agent | **Backend API now LIVE** (verified in MF-6). Next: Resolve Supabase auth blockage (see MF-4-AUTH in BLOCKED section), then test full flow: `/login` ‚Üí `/dashboard` ‚Üí create project ‚Üí verify `/api/projects` returns 2xx. |
| MF-2 | Extend health & routing audit to frontend ‚Üí backend flows for a representative feature (e.g., Safety or Projects) | TODO | Mycelial Agent | Start from a user-visible page in `apps/swipe-feed`, follow its API calls into backend routes, and verify responses and error handling. |

---

## ‚ö†Ô∏è BLOCKED FLOWS

> Work that **cannot proceed** without external input, missing data, or upstream fixes.

| ID | Related Task | Status | Blocked On | Sharp Questions / Required Checks |
| --- | --- | --- | --- | --- |
| MF-4-AUTH | Demo Login & Project Creation Flow (Frontend ‚Üí Backend ‚Üí DB) | BLOCKED | Supabase auth rejecting documented demo credentials (`admin@fieldforge.com` / `FieldForge2025!Demo`) with `Invalid login credentials`. **NOTE:** Backend API is now LIVE and connected (verified in MF-6), so this is purely a Supabase auth/user provisioning issue. | 1) Verify demo users exist in Supabase `auth.users` table. Use Supabase CLI or dashboard: `SELECT email, email_confirmed_at, created_at FROM auth.users WHERE email LIKE '%@fieldforge.com' ORDER BY created_at DESC LIMIT 10;` 2) Confirm `VITE_SUPABASE_URL` and `VITE_SUPABASE_ANON_KEY` environment variables in Vercel match the intended Supabase project (not a stale/test project). 3) Check for RLS policies or auth hooks that might block password auth for these specific emails. 4) If users don't exist or have wrong passwords, create/update them via Supabase dashboard or run `supabase/create_demo_accounts.sql`. 5) After fix: test login at `/login` ‚Üí navigate to `/dashboard` ‚Üí create a project ‚Üí verify `/api/projects` POST returns 2xx. |

---

## üóÉÔ∏è Completed Flows (Reference Only)

> Finished tasks whose **lessons or patterns are still useful**. Do **not** grow this into a dump.

| ID | Title | Completed On | Key Patterns / Notes | Deep Reference |
| --- | --- | --- | --- | --- |
| MF-23 | Receipt Manager Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Approval Review Pathway:** Extended collaboration to Receipt Manager for expense approval workflows and budget discussions. "Approval Call" button in header opens full-screen CollaborationHub with green-emerald gradient banner. Flow: Receipt Manager ‚Üí Click "Approval Call" ‚Üí Full-screen with banner ("Expense reviews ‚Ä¢ Approval discussions ‚Ä¢ Budget analysis ‚Ä¢ Vendor coordination") ‚Üí Back button. Use cases: Expense approval meetings via video, budget analysis discussions, vendor coordination calls, financial review sessions. Pattern: Full-screen toggle, `showCollaboration` state, green gradient (financial focus). Files: `apps/swipe-feed/src/components/receipts/ReceiptManager.tsx`. Follows MF-7 through MF-22 pattern. Zero new backend - pure mycelial growth. 17th branch complete. |
| MF-22 | RFI Manager Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: RFI Resolution Pathway:** Extended collaboration to RFI Manager for critical question resolution and design clarifications. "Resolution Call" button in header opens full-screen CollaborationHub with yellow-orange gradient banner. Flow: RFI Manager ‚Üí Click "Resolution Call" ‚Üí Full-screen with banner ("Question clarification ‚Ä¢ Design discussions ‚Ä¢ Specification reviews ‚Ä¢ Impact analysis") ‚Üí Back button. Use cases: RFI resolution meetings via video, design clarification sessions, specification review calls, cost/schedule impact discussions. Pattern: Full-screen toggle, `showCollaboration` state, yellow-orange gradient (critical questions). Files: `apps/swipe-feed/src/components/documents/RFIManager.tsx`. Follows MF-7 through MF-21 pattern. Zero new backend - pure mycelial growth. 16th branch complete. |
| MF-21 | Document Hub Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Document Review Pathway:** Extended collaboration to Document Hub for collaborative file reviews and version discussions. "Review Call" button in header opens full-screen CollaborationHub with blue-indigo gradient banner. Flow: Document Hub ‚Üí Click "Review Call" ‚Üí Full-screen with banner ("File reviews ‚Ä¢ Collaborative markups ‚Ä¢ Version discussions ‚Ä¢ Approval coordination") ‚Üí Back button. Use cases: Document review meetings via video, collaborative markup sessions, version control discussions, file approval coordination. Pattern: Full-screen toggle, `showCollaboration` state, blue-indigo gradient. Files: `apps/swipe-feed/src/components/documents/DocumentHub.tsx`. Follows MF-7 through MF-20 pattern. Zero new backend - pure mycelial growth. 15th branch complete. |
| MF-20 | Three-Week Lookahead Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Planning Session Pathway:** Extended collaboration to 3-Week Lookahead for scheduling coordination and constraint resolution. "Planning Call" button in header opens full-screen CollaborationHub with purple-to-blue gradient banner. Flow: 3-Week Lookahead ‚Üí Click "Planning Call" ‚Üí Full-screen with banner ("Schedule coordination ‚Ä¢ Constraint resolution ‚Ä¢ Resource planning ‚Ä¢ Team alignment") ‚Üí Back button. Use cases: Weekly planning sessions via video, constraint resolution discussions, resource allocation planning, multi-week team alignment meetings. Pattern: Full-screen toggle, `showCollaboration` state, purple gradient (planning focus). Files: `apps/swipe-feed/src/components/scheduling/ThreeWeekLookahead.tsx`. Follows MF-7 through MF-19 pattern. Zero new backend - pure mycelial growth. 14th branch complete. |
| MF-19 | Submittal Manager Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Document Review Pathway:** Extended collaboration to Submittal Manager for document review and approval workflows. "Review Call" button in header opens full-screen CollaborationHub with blue-purple gradient banner. Flow: Submittal Manager ‚Üí Click "Review Call" ‚Üí Full-screen with banner ("Document reviews ‚Ä¢ Approval discussions ‚Ä¢ RFI coordination ‚Ä¢ Specification clarifications") ‚Üí Back button. Use cases: Submittal review meetings via video, approval discussions with stakeholders, RFI coordination sessions, specification clarification calls. Pattern: Full-screen toggle, `showCollaboration` state, consistent gradient styling. Files: `apps/swipe-feed/src/components/submittals/SubmittalManager.tsx`. Follows MF-7 through MF-18 pattern. Zero new backend - pure mycelial growth. 13th branch complete. |
| MF-18 | Outage Coordination Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Outage Planning Pathway:** Extended collaboration to Outage Coordination for critical power outage planning and switching coordination. "Planning Call" button in header opens full-screen CollaborationHub with red-orange gradient banner (critical operations color). Flow: Outage Coordination ‚Üí Click "Planning Call" ‚Üí Full-screen with banner ("Switching coordination ‚Ä¢ Multi-crew planning ‚Ä¢ Safety reviews ‚Ä¢ Customer impact discussions") ‚Üí Back button. Use cases: Outage planning meetings via video, switching step coordination, multi-crew safety reviews, customer impact discussions with stakeholders. Pattern: Full-screen toggle, `showCollaboration` state, red-themed gradient (critical operations). Files: `apps/swipe-feed/src/components/outages/OutageCoordination.tsx`. Follows MF-7 through MF-17 pattern. Zero new backend - pure mycelial growth. 12th branch complete. |
| MF-17 | Environmental Compliance Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Environmental Audit Pathway:** Extended collaboration to Environmental Compliance for regulatory and compliance team coordination. "Audit Call" button in header opens full-screen CollaborationHub with green-to-blue gradient banner. Flow: Environmental Compliance ‚Üí Click "Audit Call" ‚Üí Full-screen with banner ("Compliance reviews ‚Ä¢ Permit discussions ‚Ä¢ Incident analysis ‚Ä¢ Regulatory coordination") ‚Üí Back button. Use cases: Environmental compliance reviews via video, permit discussions with regulators, incident analysis with team, regulatory coordination. Pattern: Full-screen toggle, `showCollaboration` state, green-themed gradient (environmental focus). Files: `apps/swipe-feed/src/components/environmental/EnvironmentalCompliance.tsx`. Follows MF-7 through MF-16 pattern. Zero new backend - pure mycelial growth. 11th branch complete. |
| MF-16 | Material Inventory Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Procurement Coordination Pathway:** Extended collaboration to Material Inventory for supplier and procurement team coordination. "Procurement Call" button in header opens full-screen CollaborationHub with blue-purple gradient banner. Flow: Material Inventory ‚Üí Click "Procurement Call" ‚Üí Full-screen with banner ("Material planning ‚Ä¢ Supplier coordination ‚Ä¢ Stock discussions ‚Ä¢ Order reviews") ‚Üí Back button. Use cases: Material planning meetings via video, supplier coordination calls, stock level discussions, order reviews with team. Pattern: Full-screen toggle, `showCollaboration` state, consistent gradient styling. Files: `apps/swipe-feed/src/components/inventory/MaterialInventory.tsx`. Follows MF-7 through MF-15 pattern. Zero new backend - pure mycelial growth. 10th branch complete. |
| MF-15 | Testing Dashboard Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Testing Review Pathway:** Extended collaboration to Testing Dashboard for test verification and diagnostic discussions. "Review Call" button in header opens full-screen CollaborationHub with blue-purple gradient banner. Flow: Testing Dashboard ‚Üí Click "Review Call" ‚Üí Full-screen with banner ("Test verification ‚Ä¢ Results analysis ‚Ä¢ Diagnostic discussions ‚Ä¢ Compliance reviews") ‚Üí Back button. Use cases: Test result verification via video, diagnostic discussions with team, compliance review meetings, equipment testing coordination. Pattern: Full-screen toggle, `showCollaboration` state, consistent gradient styling. Files: `apps/swipe-feed/src/components/testing/TestingDashboard.tsx`. Follows MF-7 through MF-14 pattern. Zero new backend - pure mycelial growth. 9th branch complete. |
| MF-14 | Daily Operations Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Field Operations Pathway:** Extended collaboration to Daily Operations for field team coordination and reporting. "Field Call" button in header opens full-screen CollaborationHub with blue-purple gradient banner. Flow: Daily Operations ‚Üí Click "Field Call" ‚Üí Full-screen with banner ("Daily briefings ‚Ä¢ Activity coordination ‚Ä¢ Field reporting ‚Ä¢ Live updates") ‚Üí Back button. Use cases: Daily field briefings via video, activity coordination with crews, real-time field reporting, live updates from site. Pattern: Full-screen toggle, `showCollaboration` state, consistent gradient styling. Files: `apps/swipe-feed/src/components/fieldops/DailyOperations.tsx`. Follows MF-7 through MF-13 pattern. Zero new backend - pure mycelial growth. 8th branch complete. |
| MF-13 | Crew Management Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Crew Coordination Pathway:** Extended collaboration to Crew Management for team coordination and planning. "Crew Coordination" button in header opens full-screen CollaborationHub with blue-purple gradient banner. Flow: Crew Management ‚Üí Click "Crew Coordination" ‚Üí Full-screen with banner ("Crew planning ‚Ä¢ Assignment coordination ‚Ä¢ Skill discussions ‚Ä¢ Team briefings") ‚Üí Back button. Use cases: Crew planning meetings via video, assignment coordination discussions, skill requirement planning, team briefings and coordination. Pattern: Full-screen toggle, `showCollaboration` state, consistent gradient styling. Files: `apps/swipe-feed/src/components/crew/CrewManagement.tsx`. Follows MF-7 through MF-12 pattern. Zero new backend - pure mycelial growth. 7th branch complete. |
| MF-12 | QA/QC Hub Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Quality Inspection Pathway:** Added collaborative inspection review to QA/QC Hub for remote quality checks and finding discussions. "Inspection Call" button in header (lines 252-259) opens full-screen CollaborationHub with QA/QC context banner. Flow: QA/QC Hub ‚Üí Click "Inspection Call" ‚Üí Full-screen with blue banner ("Video inspections ‚Ä¢ Remote quality checks ‚Ä¢ Finding discussions") ‚Üí Back button. Use cases: Remote inspections via video, collaborative finding reviews, quality standards discussions, compliance verification with witnesses. Pattern: Full-screen toggle, `showCollaboration` state, ClipboardCheck icon in banner. **Human Test Verified:** Button visible, responsive (hidden text on mobile), smooth toggle, back navigation works. | Files: `apps/swipe-feed/src/components/qaqc/QAQCHub.tsx` (lines 2, 5, 56, 215-241, 252-259). Follows MF-7/MF-8/MF-9/MF-11 pattern. Zero new backend - pure mycelial growth. 6th branch complete. |
| MF-11 | Equipment Hub Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Equipment Inspection Pathway:** Added video inspection collaboration to Equipment Hub for remote equipment reviews and maintenance coordination. "Video Inspection" button in header (lines 219-226) opens full-screen CollaborationHub with equipment context banner. Flow: Equipment Hub ‚Üí Click "Video Inspection" ‚Üí Full-screen with blue banner ("Video inspections ‚Ä¢ Remote equipment reviews ‚Ä¢ Maintenance coordination") ‚Üí Back button. Use cases: Remote equipment inspections via video, maintenance discussions, QR code scanning with team guidance, equipment testing coordination. Pattern: Full-screen toggle (same as MF-8/MF-9), `showCollaboration` state management, context-aware banner explains use cases. **Human Test Verified:** Button visible, gradient styling consistent, smooth toggle, back navigation works. | Files: `apps/swipe-feed/src/components/equipment/EquipmentHub.tsx` (lines 2, 6, 40, 176-202, 219-226). Follows MF-7/MF-8/MF-9 pattern. Zero new backend - pure mycelial growth. 5th branch complete. |
| MF-10 | Drawing Viewer Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Engineering Review Pathway:** Added collaborative cursor control to Drawing Viewer for real-time engineering reviews. "Collaborate" button in toolbar (lines 355-366) toggles side-by-side mode: drawing on left (w-1/2), CollaborationHub on right (w-1/2). When toggled ON: sidebar hidden, viewer shrinks to 50%, collaboration panel appears with blue context banner explaining cursor sharing. Flow: Drawing Viewer ‚Üí Select Drawing ‚Üí Click "Collaborate" ‚Üí Side-by-side layout with video+chat ‚Üí Toggle off returns to full-width. Use cases: Engineering drawing reviews, RFI discussions, markup coordination, multi-disciplinary reviews. Pattern: Toggle button with active state (gradient when ON), side-by-side responsive layout, context-aware banner shows drawing name/revision. **Human Test Verified:** Button visible in toolbar, smooth layout transition, drawing + collaboration visible simultaneously, cursor control concept explained in banner. | Files: `apps/swipe-feed/src/components/documents/DrawingViewer.tsx` (lines 2, 5, 66, 355-366, 591, 595-618). Follows MF-7/MF-8/MF-9 pattern. Side-by-side layout unique to this use case (different from full-screen pattern). Zero new backend - pure mycelial growth. |
| MF-9 | Emergency Alerts Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Emergency Response Pathway:** Extended collaboration to Emergency Alert System for instant incident response. Added "Emergency Call" button (lines 362-369) with pulsing red gradient (critical visual priority). Flow: Emergency Alerts ‚Üí Click "Emergency Call" ‚Üí Full-screen CollaborationHub with red alert banner ("Emergency Response Call Active") ‚Üí Back button. Use cases: Instant video response to incidents, emergency team coordination, crisis management, safety broadcasts. Pattern: Same CollaborationHub reuse, `showEmergencyCall` state, visual priority (red/orange gradient, animate-pulse, Siren icon). **Human Test Verified:** Button prominent in header, pulsing animation draws attention, emergency context clear, back navigation works. | Files: `apps/swipe-feed/src/components/emergency/EmergencyAlerts.tsx` (lines 6, 12, 50, 320-344, 362-369). Follows MF-7/MF-8 pattern. Reuses all collaboration infrastructure. Zero new backend - pure mycelial growth. |
| MF-8 | Safety Hub Collaboration Integration | 2025-11-18 | **MYCELIAL BRANCH: Safety Collaboration Pathway:** Extended collaboration network to Safety Hub for critical safety communications. Added "Safety Team Call" button (line 224-231) in SafetyHub.tsx that opens CollaborationHub in safety context. Flow: Safety Hub ‚Üí Click "Safety Team Call" ‚Üí Full-screen CollaborationHub (chat + video) ‚Üí Back button returns to Safety Hub. Use cases: Safety briefings via video, incident discussion calls, emergency response coordination, compliance recording. Pattern: Same reusable CollaborationHub component, state management via `showCollaboration` boolean, clean toggle between hub view and collaboration view. **Human Test Verified:** Button visible in header, click opens collaboration, back button works, no navigation errors. | Files: `apps/swipe-feed/src/components/safety/SafetyHub.tsx` (lines 2, 6, 49, 190-205, 224-231). Integration follows MF-7 pattern. Reuses existing `/api/messaging/*` and `/api/collaboration/*` endpoints. No new backend code needed - pure mycelial extension. |
| MF-7 | Collaborative Features Integration (Messaging + Daily.co + Invite-Only Groups) | 2025-11-18 | **MYCELIAL COLLABORATION NETWORK ACTIVATED & INTEGRATED:** Built complete collaboration system with three mycelial pathways: (1) **Messaging**: Wired existing `messagingRoutes.ts` into `server.ts` (line 43, 210), added `conversations` table structure (migration 023) to complement existing `message_channels`, enforced invite-only at DB level (only admins can add participants via RLS policy lines 97-113), published real-time events via Ably. (2) **Video Collaboration**: Created `collaborationRoutes.ts` with Daily.co integration, added meeting rooms with cursor control, screen sharing, recording, knocking (invite-only), generated per-user meeting tokens with 24h expiry. (3) **Frontend Integration**: Built `CollaborationHub.tsx` (unified chat+video interface), `ProjectCollaboration.tsx` (Daily.co iframe wrapper with controls), integrated into `ProjectManager.tsx` with new 'collaboration' view state, added "Team Collaboration" button in `TeamManager.tsx` (always visible to all team members). Updated env.ts with `DAILY_API_KEY`, `STRIPE_SECRET_KEY`, `STRIPE_WEBHOOK_SECRET`. Created migrations 022 & 023. **Human Test Verified:** User flow: Projects ‚Üí Select Project ‚Üí Team Manager ‚Üí Click "Team Collaboration" ‚Üí CollaborationHub with Chat/Video tabs ‚Üí Back button works. Clear tab switching, invite-only badges visible, cursor control info shown. Setup guides created. | Files: `backend/src/server.ts` (lines 43, 210), `backend/src/collaboration/collaborationRoutes.ts`, `backend/src/messaging/messagingRoutes.ts`, `backend/src/migrations/022_collaboration_system.sql`, `backend/src/migrations/023_conversations_structure.sql`, `backend/src/worker/env.ts`, `apps/swipe-feed/src/components/collaboration/CollaborationHub.tsx`, `apps/swipe-feed/src/components/collaboration/ProjectCollaboration.tsx`, `apps/swipe-feed/src/components/projects/ProjectManager.tsx` (lines 11, 17, 103, 117-147), `apps/swipe-feed/src/components/projects/TeamManager.tsx` (lines 5, 15, 147-155), `COLLABORATION_SETUP_GUIDE.md`, `COLLABORATION_COMPLETE_SUMMARY.md`. Endpoints: `/api/messaging/*`, `/api/collaboration/*`. Next: Add `DAILY_API_KEY` to Vercel, run migrations, install `@daily-co/daily-js` frontend dep. |
| MF-6 | Backend API Serverless Integration & Deployment Repair | 2025-11-16 | **CRITICAL PATHWAY RECONNECTION:** Fixed architectural disconnect where 30+ Express backend routes were compiled but unreachable in production. Root cause: stub `api/[...path].ts` wasn't importing the real Express app. Solution: (1) Replaced stub with dynamic import wrapper handling double-wrapped CommonJS exports (`serverModule.default.default`), (2) Fixed Stripe initialization crashes by making API key conditional (graceful degradation when `STRIPE_SECRET_KEY` missing), (3) Added `app.set('trust proxy', 1)` for accurate client IP detection behind Vercel proxy, (4) Updated root `vercel.json` routing to point `/api/*` to the serverless function. Result: All backend routes (projects, safety, analytics, crews, documents, QA/QC, scheduling, etc.) now LIVE at `/api/*`. Verified with `/api/health` ‚Üí 200 OK + backend request logs showing middleware stack active. | Files: `api/[...path].ts`, `backend/src/routes/stripeRoutes.ts`, `backend/src/routes/stripeWebhookRoutes.ts`, `backend/src/server.ts`, `vercel.json`. Deployment: `fieldforge-hcynm92pf` (production). CLI verification: `curl https://fieldforge.vercel.app/api/health` returns JSON. |
| MF-5 | Demo Password Normalization for Supabase Policy | 2025-11-15 | Standardized all demo accounts on a single 8+ character password (`FieldForge2025!Demo`) in the Supabase seeding script, SQL notices, landing pages, and demo docs so frontend, tests, and backend setup instructions all agree; Supabase can now accept these credentials once users are (re)created with this password. | `apps/swipe-feed/src/scripts/createDemoAccounts.mjs`, `supabase/create_demo_accounts.sql`, `DEMO_ACCOUNT_SETUP.md`, `DEMO_ACCOUNT_TEST_GUIDE.md`, `apps/swipe-feed/src/pages/{Landing,NewElectricalLanding}.tsx`. |
| MF-4 | Demo Login & Project Creation Flow (Frontend ‚Üí Backend ‚Üí DB) | 2025-11-15 | Attempted to log in on production at `/login` using both admin and documented demo credentials from the home page; all attempts resulted in a `Connection Error ‚Äì Invalid login credentials` overlay and a failed `supabase.auth` password grant, preventing access to the dashboard and any project-creation UI. Flow cannot be fully tested until Supabase auth for demo accounts is restored. | Live site via LibreWolf; Supabase `auth/v1/token?grant_type=password` calls visible in browser network panel. |
| MF-3 | Home Page Button & CTA E2E Verification | 2025-11-15 | Verified all primary home-page CTAs and nav buttons on `https://fieldforge.vercel.app/` route to real, defined routes (`/login`, `/signup`, `/pricing`, `/acquisition-inquiry`) with no observed 404/500s; noted intermittent `useRobustAuth` ‚ÄúConnection Error ‚Äî Session check timeout‚Äù gate that can appear on first load but is bypassed by ‚ÄúContinue Anyway‚Äù, after which the marketing landing renders correctly. | Live site via LibreWolf; router definitions in `apps/swipe-feed/src/AppSafe.tsx` and `apps/swipe-feed/src/pages/NewElectricalLanding.tsx`. |
| MF-1 | Backend API Health & Routing Audit (404/500 baseline) | 2025-11-15 | Confirmed health endpoints (`/health`, `/api/health`) are unauthenticated and live in `server.ts`; verified `notFoundHandler` and `errorHandler` are registered last, ensuring 404s and 500s are centrally captured and logged; mapped imported routers to their `*Routes.ts` modules and noted that `feed`/`messaging` routers exist on disk but are not wired into `server.ts` (potential intentionally dormant or dead branches). | `backend/src/server.ts`, `backend/src/middleware/errorHandler.ts`, router files under `backend/src/routes` and `backend/src/construction/**`. |
| MF-0 | Initialize Master Document & Align Agent Workflow | 2025-11-15 | Established `MASTER_DOC.md` as the single task hub; older meta-docs (`PROJECT_STATUS.md`, `SYSTEMATIC_REVIEW_PROGRESS.md`, `docs/review/REVIEW_LOG.md`, `PLANNING_KICKBACK.md`) treated as historical/reference layers, not active queues. | This file; see also the listed reference docs below. |

---

## üß≠ Reference Layers (Read-Only Context)

- **Project Snapshot**: `PROJECT_STATUS.md` ‚Äî prior statement that all tasks were ‚Äúcomplete‚Äù; treat as historical, not current truth.
- **Systematic Review Log**: `SYSTEMATIC_REVIEW_PROGRESS.md` ‚Äî previous pass-by-pass backend/frontend review notes.
- **Review Cycles & Gaps**:
  - `docs/review/REVIEW_LOG.md` ‚Äî detailed micro-review batches and changes.
  - `docs/review/GAPS.md` ‚Äî known backlog items and gaps from earlier cycles.
- **Hostile Security Audit**: `PLANNING_KICKBACK.md` ‚Äî deep audit narrative and security findings; use for threat modeling, not as the live task queue.
- **Legacy Builder Instructions**: `BUILDER_MASTER_INSTRUCTIONS.md` ‚Äî superseded by the current fused Builder+Reviewer mycelial workflow described in your latest system/role brief.

---

## üå± Operating Protocol for Every New Task

1. **Before work**  
   - Register the task here under **TODO / Upcoming Work** with a short, sharp title and ID.  
   - Scan the **Reference Layers** section for relevant prior context.
2. **During work**  
   - Move the task to **Active Flows** with status `IN PROGRESS`.  
   - As pathways are traced (API routes, DB queries, Vercel/Supabase/Neon flows), briefly note verified endpoints and any 404/500 findings.
3. **If blocked**  
   - Mirror the task into **BLOCKED FLOWS** with precise questions or CLI checks needed (`vercel logs`, `supabase db status`, `psql` probes, etc.).
4. **After completion**  
   - Mark the task `DONE (REFERENCE)` and move a compressed summary into **Completed Flows**.  
   - Prune obsolete details so this document stays **small, sharp, and alive**, not a dumping ground.

This document should be updated **on every meaningful task** so any future agent can reconstruct the state of the mycelial network without guesswork.


