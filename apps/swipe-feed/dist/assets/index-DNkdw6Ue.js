var ns=Object.defineProperty;var ls=(r,t,s)=>t in r?ns(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var Se=(r,t,s)=>ls(r,typeof t!="symbol"?t+"":t,s);import{r as h,a as is,u as Ie,L as J,b as Tt,O as os,B as cs,R as ds,c as T,N as ye,d as ms}from"./react-DpGtTlND.js";import{c as xs}from"./supabase-C4VumT-C.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const x of l.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&a(x)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();var $t={exports:{}},De={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hs=h,us=Symbol.for("react.element"),ps=Symbol.for("react.fragment"),gs=Object.prototype.hasOwnProperty,fs=hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bs={key:!0,ref:!0,__self:!0,__source:!0};function It(r,t,s){var a,n={},l=null,x=null;s!==void 0&&(l=""+s),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(x=t.ref);for(a in t)gs.call(t,a)&&!bs.hasOwnProperty(a)&&(n[a]=t[a]);if(r&&r.defaultProps)for(a in t=r.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:us,type:r,key:l,ref:x,props:n,_owner:fs.current}}De.Fragment=ps;De.jsx=It;De.jsxs=It;$t.exports=De;var e=$t.exports,Ve={},ft=is;Ve.createRoot=ft.createRoot,Ve.hydrateRoot=ft.hydrateRoot;const ys="https://lzfzkrylexsarpxypktt.supabase.co",js="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx6ZnprcnlsZXhzYXJweHlwa3R0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI0MzU4NTMsImV4cCI6MjA3ODAxMTg1M30.NkvmFfttYQ-DUpG3KLK10AGrJRS9OlQ-83XXX6CU7cY",f=xs(ys,js,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{"x-application-name":"FieldForge"}}}),bt={email:"demo@fieldforge.com",password:"FieldForge2025!Demo"};async function vs(r,t,s){const{data:a,error:n}=await f.auth.signUp({email:r,password:t,options:{data:{first_name:s.firstName,last_name:s.lastName,phone:s.phone,company:s.company,job_title:s.jobTitle,employee_id:s.employeeId},emailRedirectTo:window.location.origin}});if(n)throw n;return a}async function ws(r,t){const{data:s,error:a}=await f.auth.signInWithPassword({email:r,password:t});if(a)throw a;return s}async function Ns(r){const{data:t,error:s}=await f.from("user_profiles").select("*").eq("id",r).single();if(s)throw s;return t}function ks(){const[r,t]=h.useState({user:null,session:null,profile:null,loading:!0,error:null,isAuthenticated:!1,isAdmin:!1});h.useEffect(()=>{s();const{data:{subscription:m}}=f.auth.onAuthStateChange(async(d,i)=>{if(i){const g=await a(i.user.id);t({user:i.user,session:i,profile:g,loading:!1,error:null,isAuthenticated:!0,isAdmin:(g==null?void 0:g.is_admin)||(g==null?void 0:g.role)==="admin"})}else t({user:null,session:null,profile:null,loading:!1,error:null,isAuthenticated:!1,isAdmin:!1})});return()=>{m.unsubscribe()}},[]);const s=async()=>{try{const{data:{session:m},error:d}=await f.auth.getSession();if(d)throw d;if(m){const i=await a(m.user.id);t({user:m.user,session:m,profile:i,loading:!1,error:null,isAuthenticated:!0,isAdmin:(i==null?void 0:i.is_admin)||(i==null?void 0:i.role)==="admin"})}else t(i=>({...i,loading:!1}))}catch(m){t(d=>({...d,loading:!1,error:m.message}))}},a=async m=>{try{return await Ns(m)}catch(d){return console.error("Failed to load user profile:",d),null}};return{...r,signIn:async(m,d)=>{try{t(y=>({...y,loading:!0,error:null}));const{data:i,error:g}=await f.auth.signInWithPassword({email:m,password:d});if(g)throw g;if(i.session){const y=await a(i.session.user.id);t({user:i.session.user,session:i.session,profile:y,loading:!1,error:null,isAuthenticated:!0,isAdmin:(y==null?void 0:y.is_admin)||(y==null?void 0:y.role)==="admin"})}return i}catch(i){throw t(g=>({...g,loading:!1,error:i.message})),i}},signUp:async(m,d,i)=>{try{t(w=>({...w,loading:!0,error:null}));const{data:g,error:y}=await f.auth.signUp({email:m,password:d,options:{data:{first_name:i.firstName,last_name:i.lastName,phone:i.phone,job_title:i.jobTitle,employee_id:i.employeeId}}});if(y)throw y;return t(w=>({...w,loading:!1,error:null})),g}catch(g){throw t(y=>({...y,loading:!1,error:g.message})),g}},signOut:async()=>{try{const{error:m}=await f.auth.signOut();if(m)throw m;t({user:null,session:null,profile:null,loading:!1,error:null,isAuthenticated:!1,isAdmin:!1})}catch(m){throw t(d=>({...d,error:m.message})),m}},updateProfile:async m=>{try{if(!r.user)throw new Error("No authenticated user");const{data:d,error:i}=await f.from("user_profiles").update({...m,updated_at:new Date().toISOString()}).eq("id",r.user.id).select().single();if(i)throw i;return t(g=>({...g,profile:d})),d}catch(d){throw t(i=>({...i,error:d.message})),d}},refreshSession:async()=>{try{const{data:{session:m},error:d}=await f.auth.refreshSession();if(d)throw d;if(m){const i=await a(m.user.id);t({user:m.user,session:m,profile:i,loading:!1,error:null,isAuthenticated:!0,isAdmin:(i==null?void 0:i.is_admin)||(i==null?void 0:i.role)==="admin"})}return m}catch(m){throw t(d=>({...d,error:m.message})),m}},checkSession:s}}const _s=h.createContext(null),Ss=({children:r})=>{const t=ks();return e.jsx(_s.Provider,{value:t,children:r})};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ms=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,a)=>a?a.toUpperCase():s.toLowerCase()),yt=r=>{const t=Ms(r);return t.charAt(0).toUpperCase()+t.slice(1)},Dt=(...r)=>r.filter((t,s,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===s).join(" ").trim(),As=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ps={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=h.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:n="",children:l,iconNode:x,...u},c)=>h.createElement("svg",{ref:c,...Ps,width:t,height:t,stroke:r,strokeWidth:a?Number(s)*24/Number(t):s,className:Dt("lucide",n),...!l&&!As(u)&&{"aria-hidden":"true"},...u},[...x.map(([m,d])=>h.createElement(m,d)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=(r,t)=>{const s=h.forwardRef(({className:a,...n},l)=>h.createElement(Ts,{ref:l,iconNode:t,className:Dt(`lucide-${Cs(yt(r))}`,`lucide-${r}`,a),...n}));return s.displayName=yt(r),s};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],me=b("activity",$s);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],jt=b("archive",Is);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Et=b("arrow-down",Ds);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Xe=b("arrow-left",Es);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],He=b("arrow-right",Rs);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Rt=b("arrow-up",Fs);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]],Ls=b("atom",qs);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],Us=b("bell-off",Os);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ce=b("bell",zs);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Vs=b("bookmark",Ws);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Ft=b("bot",Hs);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],ke=b("brain",Bs);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Xs=b("briefcase",Js);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],ae=b("building-2",Ys);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ee=b("calendar",Gs);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Pe=b("camera",Qs);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Ks=b("chart-pie",Zs);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ta=b("check",ea);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ye=b("chevron-down",sa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ra=b("chevron-right",aa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],vt=b("chevron-up",na);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],te=b("circle-alert",la);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],U=b("circle-check-big",ia);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ca=b("circle-x",oa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Ee=b("clipboard-check",da);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pe=b("clock",ma);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],_e=b("cloud",xa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],ua=b("cpu",ha);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Re=b("dollar-sign",pa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],qt=b("ellipsis-vertical",ga);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Lt=b("eye-off",fa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ge=b("eye",ba);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Z=b("file-text",ya);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],va=b("folder-plus",ja);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Na=b("folder",wa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],_a=b("gauge",ka);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],wt=b("globe",Sa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],ne=b("hard-hat",Ca);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Aa=b("heart",Ma);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],Ta=b("hexagon",Pa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Ia=b("house",$a);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ea=b("image",Da);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Fa=b("info",Ra);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],La=b("layers",qa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ua=b("layout-dashboard",Oa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ge=b("loader-circle",za);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Va=b("log-out",Wa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Be=b("mail",Ha);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Qe=b("map-pin",Ba);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Ze=b("map",Ja);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Ya=b("menu",Xa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Qa=b("message-circle",Ga);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Te=b("message-square",Za);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],er=b("mic-off",Ka);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],sr=b("mic",tr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"M5 12h14",key:"1ays0h"}]],rr=b("minus",ar);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Ke=b("network",nr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["path",{d:"M20.341 6.484A10 10 0 0 1 10.266 21.85",key:"1enhxb"}],["path",{d:"M3.659 17.516A10 10 0 0 1 13.74 2.152",key:"1crzgf"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}]],ir=b("orbit",lr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Fe=b("package",or);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],dr=b("phone",cr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],et=b("play",mr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Nt=b("plus",xr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ur=b("radio",hr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],kt=b("receipt",pr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],fr=b("refresh-cw",gr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],yr=b("save",br);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],tt=b("search",jr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],st=b("send",vr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Nr=b("settings",wr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],_r=b("share-2",kr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],F=b("shield",Sr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],at=b("sparkles",Cr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Ot=b("tag",Mr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Pr=b("target",Ar);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Ut=b("timer",Tr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zt=b("trash-2",$r);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Wt=b("trending-up",Ir);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oe=b("triangle-alert",Dr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],_t=b("trophy",Er);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Fr=b("truck",Rr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Lr=b("upload",qr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ur=b("user-check",Or);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Vt=b("user-plus",zr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vr=b("user",Wr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],W=b("users",Hr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Jr=b("video",Br);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Ht=b("volume-2",Xr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Bt=b("volume-x",Yr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],Jt=b("waves",Gr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Zr=b("wifi-off",Qr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],rt=b("wrench",Kr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],K=b("x",en);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],X=b("zap",tn),sn=()=>e.jsxs("div",{className:"fixed inset-0 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-40",children:[e.jsx("div",{className:"absolute top-0 -left-4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),e.jsx("div",{className:"absolute top-0 -right-4 w-96 h-96 bg-cyan-600 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute -bottom-8 left-20 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"}),e.jsx("div",{className:"absolute bottom-0 right-20 w-96 h-96 bg-amber-600 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-6000"})]}),e.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] bg-center opacity-10"}),e.jsx("div",{className:"absolute inset-0",children:[...Array(50)].map((r,t)=>e.jsx("div",{className:"absolute animate-float",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*10}s`,animationDuration:`${10+Math.random()*20}s`},children:e.jsx("div",{className:"w-1 h-1 bg-gradient-to-r from-cyan-400 to-purple-400 rounded-full blur-sm"})},t))})]}),an=()=>e.jsxs("div",{className:"relative w-full max-w-4xl mx-auto h-[400px] md:h-[500px] rounded-3xl overflow-hidden bg-black/20 backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-600/10 via-purple-600/10 to-pink-600/10 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] bg-center opacity-10"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-cyan-400/10 rounded-full animate-spin",style:{animationDuration:"20s"}}),e.jsx("div",{className:"absolute inset-8 border-2 border-purple-400/10 rounded-full animate-spin",style:{animationDuration:"15s",animationDirection:"reverse"}}),e.jsx("div",{className:"absolute inset-16 border-2 border-pink-400/10 rounded-full animate-spin",style:{animationDuration:"10s"}})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-30",children:e.jsxs("div",{className:"text-center animate-pulse",children:[e.jsx("h3",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent animate-hologram",children:"FIELDFORGEâ„¢"}),e.jsx("p",{className:"text-cyan-300/60 mt-2 text-sm md:text-lg tracking-widest",children:"NEXT GENERATION"})]})})]}),rn=()=>{const[r]=h.useState([{id:1,user:"Sarah Chen",role:"Site Supervisor",time:"2 min ago",content:"Transformer installation complete on Pad 3! ðŸŽ¯ Zero incidents, ahead of schedule.",likes:47,comments:12,type:"achievement",image:"/api/placeholder/400/300"},{id:2,user:"Mike Rodriguez",role:"Safety Lead",time:"15 min ago",content:"New AR safety briefing just dropped. Check it out in the app! ðŸ¥½âš¡",likes:89,comments:23,type:"safety",video:!0},{id:3,user:"AI Assistant",role:"FieldForge AI",time:"1 hour ago",content:"Weather alert: Optimal conditions for concrete pour tomorrow. I've pre-scheduled crews and equipment. Confirm?",likes:156,comments:45,type:"ai",actionable:!0}]);return e.jsx("div",{className:"space-y-4 max-w-md mx-auto",children:r.map((t,s)=>e.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-cyan-500/20 rounded-2xl p-4 hover:border-cyan-400/40 transition-all cursor-pointer group animate-slide-down",style:{animationDelay:`${s*200}ms`},children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-400 to-purple-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:t.user[0]})}),t.type==="ai"&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:t.user}),e.jsxs("p",{className:"text-cyan-400 text-xs",children:[t.role," â€¢ ",t.time]})]}),e.jsx(at,{className:"w-5 h-5 text-purple-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsx("p",{className:"text-gray-200 mt-2",children:t.content}),t.video&&e.jsx("div",{className:"mt-3 relative rounded-lg overflow-hidden bg-gradient-to-r from-purple-600/20 to-cyan-600/20 p-8",children:e.jsx(et,{className:"w-8 h-8 text-white mx-auto"})}),t.actionable&&e.jsxs("div",{className:"mt-3 flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 bg-cyan-500 text-black rounded-lg text-sm font-semibold hover:bg-cyan-400 transition-colors",children:"Confirm"}),e.jsx("button",{className:"px-3 py-1 bg-gray-700 text-white rounded-lg text-sm hover:bg-gray-600 transition-colors",children:"Modify"})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-3 text-gray-400",children:[e.jsxs("button",{className:"flex items-center space-x-1 hover:text-cyan-400 transition-colors",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:t.likes})]}),e.jsxs("button",{className:"flex items-center space-x-1 hover:text-purple-400 transition-colors",children:[e.jsx(Jt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:t.comments})]}),e.jsxs("button",{className:"flex items-center space-x-1 hover:text-pink-400 transition-colors",children:[e.jsx(Ke,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Share"})]})]})]})]})},t.id))})},Ue=({end:r,duration:t=2,suffix:s=""})=>{const[a,n]=h.useState(0);return h.useEffect(()=>{const l=r/(t*60),x=setInterval(()=>{n(u=>{const c=u+l;return c>=r?(clearInterval(x),r):c})},1e3/60);return()=>clearInterval(x)},[r,t]),e.jsxs("span",{children:[Math.floor(a).toLocaleString(),s]})},nn=()=>{const r=Ie();return e.jsxs("div",{className:"relative min-h-screen bg-black text-white overflow-x-hidden",children:[e.jsx("div",{className:"fixed inset-0 -z-20",children:e.jsx(sn,{})}),e.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-xl border-b border-white/10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 animate-slide-down",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ta,{className:"w-10 h-10 text-cyan-400"}),e.jsx(X,{className:"w-5 h-5 text-white absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"FIELDFORGE"}),e.jsx("p",{className:"text-xs text-gray-400 tracking-widest",children:"THE FUTURE IS NOW"})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("button",{className:"text-gray-300 hover:text-cyan-400 transition-colors hidden md:block",children:"Features"}),e.jsx("button",{className:"text-gray-300 hover:text-cyan-400 transition-colors hidden md:block",children:"Technology"}),e.jsx("button",{className:"text-gray-300 hover:text-cyan-400 transition-colors hidden md:block",children:"Vision"}),e.jsx("button",{onClick:()=>r("/login"),className:"px-6 py-2.5 bg-gradient-to-r from-cyan-500 to-purple-600 rounded-full font-semibold hover:shadow-[0_0_30px_rgba(0,255,255,0.5)] hover:scale-105 active:scale-95 transition-all",children:"Enter the Future"})]})]})})}),e.jsxs("section",{className:"relative min-h-screen flex items-center justify-center pt-20",children:[e.jsx("div",{className:"absolute inset-0 -z-10 flex items-center justify-center",children:e.jsx(an,{})}),e.jsxs("div",{className:"relative z-20 max-w-7xl mx-auto px-6 text-center",children:[e.jsxs("div",{className:"animate-slide-down",children:[e.jsxs("div",{className:"inline-flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-purple-600/20 to-cyan-600/20 backdrop-blur-xl rounded-full border border-cyan-500/30 mb-6",children:[e.jsx(at,{className:"w-4 h-4 text-cyan-400"}),e.jsx("span",{className:"text-sm text-cyan-300",children:"Introducing the Future of Construction"})]}),e.jsxs("h1",{className:"text-7xl md:text-8xl font-bold mb-6",children:[e.jsx("span",{className:"bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"BUILD"}),e.jsx("br",{}),e.jsx("span",{className:"text-white",children:"THE IMPOSSIBLE"})]}),e.jsxs("p",{className:"text-xl md:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto",children:["The world's first ",e.jsx("span",{className:"text-cyan-400 font-semibold",children:"social construction platform"}),". Where AI meets steel. Where data builds skylines. Where the future is constructed daily."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsxs("button",{onClick:()=>r("/signup"),className:"px-8 py-4 bg-gradient-to-r from-cyan-500 via-purple-600 to-pink-600 rounded-full font-bold text-lg hover:shadow-[0_0_50px_rgba(0,255,255,0.5)] hover:scale-105 active:scale-95 transition-all flex items-center space-x-2",children:[e.jsx("span",{children:"Start Building"}),e.jsx(He,{className:"w-5 h-5"})]}),e.jsxs("button",{onClick:()=>r("/login"),className:"px-8 py-4 bg-white/10 backdrop-blur-xl border border-white/30 rounded-full font-bold text-lg hover:bg-white/20 hover:scale-105 active:scale-95 transition-all flex items-center space-x-2",children:[e.jsx(et,{className:"w-5 h-5"}),e.jsx("span",{children:"Watch the Revolution"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-8 mt-16 max-w-4xl mx-auto animate-slide-down",style:{animationDelay:"1s"},children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-cyan-400",children:e.jsx(Ue,{end:1847,suffix:"+"})}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Active Projects"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-purple-400",children:e.jsx(Ue,{end:47329,suffix:"+"})}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Connected Workers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-4xl font-bold text-pink-400",children:["$",e.jsx(Ue,{end:2.8,duration:3,suffix:"B+"})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Value Managed"})]})]})]})]}),e.jsx("section",{className:"relative py-32 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-5xl md:text-6xl font-bold mb-6",children:e.jsx("span",{className:"bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"Construction Gets Social"})}),e.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Real-time collaboration that feels like scrolling through the future. Every update, every milestone, every breakthrough - shared instantly."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[e.jsx("div",{className:"animate-slide-down",children:e.jsx(rn,{})}),e.jsx("div",{className:"space-y-6",children:[{icon:ke,title:"AI-Powered Intelligence",description:"Our AI learns from every project, predicting issues before they happen."},{icon:ir,title:"Real-Time Sync",description:"Changes on-site reflect instantly across all devices. No delays, no confusion."},{icon:Ke,title:"Connected Ecosystem",description:"From field to office, everyone stays in perfect sync through our social feed."},{icon:Ls,title:"Quantum Leap Forward",description:"This isn't an upgrade. It's a complete reimagination of construction management."}].map((t,s)=>e.jsxs("div",{style:{animationDelay:`${s*100}ms`},className:"flex space-x-4 group cursor-pointer",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-500/20 to-purple-600/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(t.icon,{className:"w-6 h-6 text-cyan-400"})}),e.jsx("div",{className:"absolute inset-0 bg-cyan-500/30 rounded-xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-1",children:t.title}),e.jsx("p",{className:"text-gray-400",children:t.description})]})]},s))})]})]})}),e.jsx("section",{className:"relative py-32 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"text-center mb-16",children:e.jsxs("h2",{className:"text-5xl md:text-6xl font-bold mb-6",children:[e.jsx("span",{className:"text-white",children:"Features From "}),e.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Tomorrow"})]})}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:ua,title:"Neural Project Management",color:"from-cyan-400 to-blue-600",description:"AI that thinks ahead, plans smarter, and adapts in real-time."},{icon:wt,title:"Global Mesh Network",color:"from-purple-400 to-pink-600",description:"Connect with any project, anywhere, instantly. No boundaries."},{icon:F,title:"Predictive Safety Shield",color:"from-green-400 to-emerald-600",description:"Zero incidents through AI-powered hazard prediction."},{icon:_a,title:"Quantum Scheduling",color:"from-orange-400 to-red-600",description:"Optimize thousands of variables simultaneously."},{icon:La,title:"4D Visualization",color:"from-indigo-400 to-purple-600",description:"See your project through time and space."},{icon:Ft,title:"Autonomous Reporting",color:"from-pink-400 to-rose-600",description:"Reports write themselves. Data flows like water."}].map((t,s)=>e.jsxs("div",{style:{animationDelay:`${s*100}ms`},className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r opacity-0 group-hover:opacity-100 blur-3xl transition-opacity duration-500 -z-10",style:{background:`linear-gradient(to right, ${t.color})`}}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl p-8 h-full hover:border-white/30 transition-all",children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${t.color} rounded-xl flex items-center justify-center mb-6`,children:e.jsx(t.icon,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:t.title}),e.jsx("p",{className:"text-gray-400",children:t.description})]})]},s))})]})}),e.jsx("section",{className:"relative py-32 px-6",children:e.jsx("div",{className:"max-w-4xl mx-auto text-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500 via-purple-600 to-pink-600 rounded-3xl blur-3xl opacity-30"}),e.jsxs("div",{className:"relative bg-black/60 backdrop-blur-xl border border-white/20 rounded-3xl p-12 md:p-16",children:[e.jsx("h2",{className:"text-5xl md:text-6xl font-bold mb-6",children:e.jsx("span",{className:"bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"The Future Waits for No One"})}),e.jsx("p",{className:"text-xl text-gray-300 mb-8 max-w-2xl mx-auto",children:"Join the revolution. Be part of the first generation to build with tomorrow's technology, today."}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:e.jsxs("button",{onClick:()=>r("/signup"),className:"px-10 py-5 bg-gradient-to-r from-cyan-500 via-purple-600 to-pink-600 rounded-full font-bold text-xl hover:shadow-[0_0_60px_rgba(0,255,255,0.6)] transition-all flex items-center space-x-3",children:[e.jsx("span",{children:"Begin Your Journey"}),e.jsx(He,{className:"w-6 h-6"})]})}),e.jsxs("div",{className:"mt-12 flex items-center justify-center space-x-8 text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"w-5 h-5 text-cyan-400"}),e.jsx("span",{children:"Military-Grade Security"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"w-5 h-5 text-purple-400"}),e.jsx("span",{children:"Lightning Fast"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wt,{className:"w-5 h-5 text-pink-400"}),e.jsx("span",{children:"Global Scale"})]})]})]})]})})}),e.jsx("footer",{className:"relative py-8 px-6 border-t border-white/10",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Â© 2025 FieldForgeâ„¢ | The Future of Construction"}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[e.jsx("span",{className:"text-xs",children:"Powered by"}),e.jsx(ke,{className:"w-4 h-4 text-cyan-400"}),e.jsx("span",{className:"text-xs",children:"Advanced AI"})]})]})})]})},ln=()=>{const r=[{path:"/",label:"Landing Page",requiresAuth:!1},{path:"/login",label:"Login",requiresAuth:!1},{path:"/signup",label:"Sign Up",requiresAuth:!1},{path:"/dashboard",label:"Dashboard",requiresAuth:!0},{path:"/feed",label:"Social Feed",requiresAuth:!0},{path:"/analytics",label:"Analytics",requiresAuth:!0},{path:"/projects",label:"Projects",requiresAuth:!0},{path:"/field",label:"Field Operations",requiresAuth:!0},{path:"/safety",label:"Safety",requiresAuth:!0},{path:"/equipment",label:"Equipment",requiresAuth:!0},{path:"/qaqc",label:"QAQC",requiresAuth:!0},{path:"/documents",label:"Documents",requiresAuth:!0},{path:"/schedule",label:"Schedule",requiresAuth:!0},{path:"/weather",label:"Weather",requiresAuth:!0},{path:"/messages",label:"Messages",requiresAuth:!0},{path:"/settings",label:"Settings",requiresAuth:!0}];return e.jsx("div",{className:"min-h-screen bg-gray-900 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"Route Testing Page"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Click any link to test routing on Vercel deployment"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-cyan-400 mb-3",children:"Public Routes"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:r.filter(t=>!t.requiresAuth).map(t=>e.jsxs(J,{to:t.path,className:"bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-cyan-500 rounded-lg p-3 transition-all flex items-center space-x-2",children:[e.jsx(U,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-white",children:t.label})]},t.path))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-purple-400 mb-3",children:"Protected Routes (Require Login)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:r.filter(t=>t.requiresAuth).map(t=>e.jsxs(J,{to:t.path,className:"bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-purple-500 rounded-lg p-3 transition-all flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-white",children:t.label})]},t.path))})]}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-400 mb-2",children:"Current URL:"}),e.jsx("p",{className:"text-white font-mono",children:window.location.href}),e.jsx("h3",{className:"text-lg font-semibold text-amber-400 mt-4 mb-2",children:"Pathname:"}),e.jsx("p",{className:"text-white font-mono",children:window.location.pathname})]})]})]})})},St=`test_${Date.now()}@fieldforge.com`,Ct="TestPassword123!",$e="demo@fieldforge.com",nt="FieldForge2025!Demo",R={reset:"\x1B[0m",green:"\x1B[32m",red:"\x1B[31m",yellow:"\x1B[33m",cyan:"\x1B[36m",bold:"\x1B[1m"};let Ne=0,Me=0;const Xt=[];function z(r,t,s){const a=t?`${R.green}âœ“ PASS${R.reset}`:`${R.red}âœ— FAIL${R.reset}`;console.log(`${a} ${r}`),s&&console.log(`  ${R.red}Error: ${s}${R.reset}`),t?Ne++:Me++,Xt.push({name:r,passed:t,error:s})}async function Yt(){console.log(`
${R.cyan}${R.bold}========================================`),console.log("       FieldForge Integration Tests     "),console.log(`========================================${R.reset}
`),await on(),await cn(),await dn(),await mn(),await xn(),await hn(),un()}async function on(){try{const{data:r,error:t}=await f.auth.getSession();if(t)throw t;z("Supabase Connection",!0)}catch(r){z("Supabase Connection",!1,r.message)}}async function cn(){try{const{data:r,error:t}=await f.auth.signUp({email:St,password:Ct,options:{data:{first_name:"Test",last_name:"User",company:"Test Co",job_title:"Tester"}}});if(t)throw t;z("User Sign Up",!0),await f.auth.signOut()}catch(r){z("User Sign Up",!1,r.message)}try{const{data:r,error:t}=await f.auth.signInWithPassword({email:St,password:Ct});if(t)throw t;z("User Sign In",!0);const{error:s}=await f.auth.signOut();if(s)throw s;z("User Sign Out",!0)}catch(r){z("User Sign In",!1,r.message)}}async function dn(){try{const{data:r,error:t}=await f.auth.signInWithPassword({email:$e,password:nt});if(t)throw t;z("Demo Account Login",!0);const{data:s,error:a}=await f.from("user_profiles").select("*").eq("email",$e).single();if(a)throw a;z("Demo User Profile",!0),await f.auth.signOut()}catch(r){z("Demo Account",!1,r.message)}}async function mn(){try{await f.auth.signInWithPassword({email:$e,password:nt});const{data:r,error:t}=await f.from("projects").select("*").limit(5);if(t)throw t;if(z("Fetch Projects",!0),r&&r.length>0){const{data:s,error:a}=await f.from("project_team").select("*").eq("project_id",r[0].id).limit(5);if(a)throw a;z("Fetch Project Team",!0)}await f.auth.signOut()}catch(r){z("Project Management",!1,r.message)}}async function xn(){try{await f.auth.signInWithPassword({email:$e,password:nt});const{data:r}=await f.auth.getUser();if(!r.user)throw new Error("No user found");const{data:t}=await f.from("projects").select("id").limit(1);if(!t||t.length===0){z("Social Feed - No Projects",!1,"No projects to post to");return}const{data:s,error:a}=await f.from("feed_posts").insert({project_id:t[0].id,author_id:r.user.id,post_type:"update",content:"Integration test post",visibility:"project"}).select().single();if(a)throw a;z("Create Feed Post",!0);const{data:n,error:l}=await f.from("feed_posts").select("*").limit(10);if(l)throw l;z("Fetch Feed Posts",!0),s&&await f.from("feed_posts").delete().eq("id",s.id),await f.auth.signOut()}catch(r){z("Social Feed",!1,r.message)}}async function hn(){const r=["user_profiles","projects","project_team","project_invitations","crew_assignments","crew_members","feed_posts","feed_reactions","feed_comments"];for(const t of r)try{const{error:s}=await f.from(t).select("id").limit(1);if(s&&!s.message.includes("no rows"))throw s;z(`Table: ${t}`,!0)}catch(s){z(`Table: ${t}`,!1,s.message)}}function un(){console.log(`
${R.cyan}${R.bold}========================================`),console.log("              Test Summary              "),console.log(`========================================${R.reset}
`);const r=Ne+Me,t=r>0?(Ne/r*100).toFixed(1):"0";console.log(`${R.green}Passed: ${Ne}${R.reset}`),console.log(`${R.red}Failed: ${Me}${R.reset}`),console.log(`Total: ${r}`),console.log(`Pass Rate: ${t}%
`),Me>0&&(console.log(`${R.red}Failed Tests:${R.reset}`),Xt.filter(s=>!s.passed).forEach(s=>{console.log(`  - ${s.name}`),s.error&&console.log(`    ${R.yellow}${s.error}${R.reset}`)})),console.log(Ne===r?`
${R.green}${R.bold}ðŸŽ‰ All tests passed! FieldForge is ready!${R.reset}
`:`
${R.red}${R.bold}âš ï¸  Some tests failed. Please review and fix issues.${R.reset}
`)}import.meta.url===`file://${process.argv[1]}`&&Yt().catch(console.error);const pn=()=>{const[r,t]=h.useState(!1),[s,a]=h.useState([]),[n,l]=h.useState(null),x=async()=>{t(!0),a([]),l(null);const c=console.log;console.log=(...m)=>{var i,g,y;const d=m.join(" ");if(d.includes("âœ“ PASS")||d.includes("âœ— FAIL")){const w=d.includes("âœ“ PASS"),k=d.replace(/.*?(âœ“ PASS|âœ— FAIL)\s+/,"").replace(/\x1b\[[0-9;]*m/g,"");a(S=>[...S,{name:k,passed:w}])}if(d.includes("Passed:")){const w=parseInt(((i=d.match(/\d+/))==null?void 0:i[0])||"0");l(k=>({...k,passed:w}))}if(d.includes("Failed:")){const w=parseInt(((g=d.match(/\d+/))==null?void 0:g[0])||"0");l(k=>({...k,failed:w}))}if(d.includes("Total:")){const w=parseInt(((y=d.match(/\d+/))==null?void 0:y[0])||"0");l(k=>({...k,total:w}))}c(...m)};try{await Yt()}catch(m){console.error("Test runner error:",m)}finally{console.log=c,t(!1)}},u=()=>!n||n.total===0?0:(n.passed/n.total*100).toFixed(1);return e.jsx("div",{className:"min-h-screen bg-gray-900 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"FieldForge Integration Tests"}),e.jsx("p",{className:"text-gray-400",children:"Run automated tests to verify all features are working correctly"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Test Suite"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Tests authentication, database, and all major features"})]}),e.jsx("button",{onClick:x,disabled:r,className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-purple-600 rounded-lg font-semibold text-white hover:shadow-lg hover:shadow-cyan-500/25 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Running Tests..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(et,{className:"w-5 h-5"}),e.jsx("span",{children:"Run Tests"})]})})]}),s.length>0&&e.jsx("div",{className:"space-y-2 mb-6",children:s.map((c,m)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${c.passed?"bg-green-900/20 border border-green-500/30":"bg-red-900/20 border border-red-500/30"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[c.passed?e.jsx(U,{className:"w-5 h-5 text-green-400"}):e.jsx(ca,{className:"w-5 h-5 text-red-400"}),e.jsx("span",{className:"text-white",children:c.name})]}),e.jsx("span",{className:`text-sm font-semibold ${c.passed?"text-green-400":"text-red-400"}`,children:c.passed?"PASS":"FAIL"})]},m))}),n&&e.jsxs("div",{className:"bg-gray-900 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Test Summary"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:n.passed}),e.jsx("div",{className:"text-sm text-gray-400",children:"Passed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:n.failed}),e.jsx("div",{className:"text-sm text-gray-400",children:"Failed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:n.total}),e.jsx("div",{className:"text-sm text-gray-400",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-2xl font-bold ${parseFloat(u())===100?"text-green-400":"text-yellow-400"}`,children:[u(),"%"]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Pass Rate"})]})]}),n.failed===0&&e.jsx("div",{className:"mt-6 p-4 bg-green-900/20 border border-green-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-green-400 font-semibold",children:"All tests passed! FieldForge is ready!"})]})}),n.failed>0&&e.jsx("div",{className:"mt-6 p-4 bg-red-900/20 border border-red-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-5 h-5 text-red-400"}),e.jsx("span",{className:"text-red-400 font-semibold",children:"Some tests failed. Please review and fix issues."})]})})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"What This Tests"}),e.jsxs("ul",{className:"space-y-2 text-gray-300",children:[e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-cyan-400",children:"â€¢"}),e.jsx("span",{children:"Supabase connection and authentication"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-cyan-400",children:"â€¢"}),e.jsx("span",{children:"User sign up, sign in, and sign out"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-cyan-400",children:"â€¢"}),e.jsx("span",{children:"Demo account access"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-cyan-400",children:"â€¢"}),e.jsx("span",{children:"Project and team management"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-cyan-400",children:"â€¢"}),e.jsx("span",{children:"Social feed posting and retrieval"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-cyan-400",children:"â€¢"}),e.jsx("span",{children:"All database tables accessibility"})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(te,{className:"w-5 h-5 text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-300 font-semibold",children:"Note"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Tests require a valid Supabase connection. Make sure your environment variables are set correctly."})]})]})})]})]})})},gn=()=>{const[r,t]=h.useState(""),[s,a]=h.useState(""),[n,l]=h.useState(!1),[x,u]=h.useState(!1),[c,m]=h.useState(null),[d,i]=h.useState(!1),g=Ie(),y=async S=>{S.preventDefault(),u(!0),m(null);try{await ws(r,s),i(!0),setTimeout(()=>{g("/dashboard")},1e3)}catch(P){m(P.message||"Failed to sign in")}finally{u(!1)}},w=async()=>{t(bt.email),a(bt.password),setTimeout(()=>{y(new Event("submit"))},100)},k=[{icon:F,label:"Safety Compliance",color:"text-green-500"},{icon:me,label:"Real-time Tracking",color:"text-blue-500"},{icon:Ze,label:"3D Visualization",color:"text-purple-500"},{icon:Z,label:"Digital Documents",color:"text-amber-500"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex",children:[e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl shadow-2xl mb-4",children:e.jsx(X,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"FieldForge"}),e.jsx("p",{className:"text-slate-400",children:"T&D Construction Management Platform"})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[c&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-500/10 border border-red-500/50 rounded-lg text-red-400",children:[e.jsx(te,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:c})]}),d&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-green-500/10 border border-green-500/50 rounded-lg text-green-400",children:[e.jsx(U,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:"Login successful! Redirecting..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-300 mb-2",children:"Email Address"}),e.jsx("input",{id:"email",type:"email",value:r,onChange:S=>t(S.target.value),placeholder:"foreman@construction.com",required:!0,className:"w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:n?"text":"password",value:s,onChange:S=>a(S.target.value),placeholder:"Enter your password",required:!0,className:"w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all pr-12"}),e.jsx("button",{type:"button",onClick:()=>l(!n),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-300",children:n?e.jsx(Lt,{className:"w-5 h-5"}):e.jsx(Ge,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 bg-slate-800 border-slate-700 rounded text-amber-500 focus:ring-amber-500"}),e.jsx("span",{className:"ml-2 text-sm text-slate-400",children:"Remember me"})]}),e.jsx("a",{href:"#",className:"text-sm text-amber-500 hover:text-amber-400",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:x,className:"w-full py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-lg hover:from-amber-600 hover:to-orange-700 transition-all duration-200 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:x?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-5 h-5 mr-2 animate-spin"}),"Signing in..."]}):"Sign In"}),e.jsx("button",{type:"button",onClick:w,className:"w-full py-3 bg-slate-800 hover:bg-slate-700 text-white font-medium rounded-lg transition-colors border border-slate-700",children:"Try Demo Account"}),e.jsxs("p",{className:"text-center text-sm text-slate-400",children:["Don't have an account?"," ",e.jsx(J,{to:"/signup",className:"text-amber-500 hover:text-amber-400 font-medium",children:"Sign up"})]})]}),e.jsxs("div",{className:"mt-8 flex items-center justify-center space-x-2 text-slate-500",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"256-bit SSL Encryption â€¢ SOC 2 Compliant"})]})]})}),e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-amber-600/20 to-orange-600/20 backdrop-blur-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/5"}),e.jsx("div",{className:"absolute top-10 right-10 w-32 h-32 bg-amber-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-10 left-10 w-40 h-40 bg-orange-500/20 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative z-10 flex flex-col justify-center p-12",children:[e.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:"Build the Future of Construction"}),e.jsx("p",{className:"text-xl text-slate-300 mb-12",children:"Manage T&D and Substation projects with cutting-edge technology"}),e.jsx("div",{className:"grid grid-cols-2 gap-6 mb-12",children:k.map(S=>e.jsxs("div",{className:"flex items-center space-x-3 bg-slate-800/30 backdrop-blur-sm p-4 rounded-lg",children:[e.jsx(S.icon,{className:`w-8 h-8 ${S.color}`}),e.jsx("span",{className:"text-white font-medium",children:S.label})]},S.label))}),e.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-amber-500",children:"500+"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Active Projects"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-amber-500",children:"10k+"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Field Workers"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-amber-500",children:"99.9%"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Uptime"})]})]}),e.jsxs("div",{className:"mt-12 flex items-center space-x-8",children:[e.jsx(ne,{className:"w-12 h-12 text-slate-400"}),e.jsx(ae,{className:"w-12 h-12 text-slate-400"}),e.jsx(X,{className:"w-12 h-12 text-slate-400"}),e.jsx(W,{className:"w-12 h-12 text-slate-400"})]})]})]})]})},fn=()=>{const[r,t]=h.useState(1),[s,a]=h.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",company:"",jobTitle:"",employeeId:""}),[n,l]=h.useState(!1),[x,u]=h.useState(!1),[c,m]=h.useState(null),[d,i]=h.useState(!1),g=Ie(),y=()=>!s.email||!s.password||!s.confirmPassword?(m("Please fill in all required fields"),!1):s.password.length<8?(m("Password must be at least 8 characters"),!1):s.password!==s.confirmPassword?(m("Passwords do not match"),!1):!0,w=()=>!s.firstName||!s.lastName||!s.company||!s.jobTitle?(m("Please fill in all required fields"),!1):!0,k=()=>{m(null),r===1&&y()?t(2):r===2&&w()&&S()},S=async()=>{u(!0),m(null);try{await vs(s.email,s.password,{firstName:s.firstName,lastName:s.lastName,phone:s.phone,company:s.company,jobTitle:s.jobTitle,employeeId:s.employeeId}),i(!0),setTimeout(()=>{g("/dashboard")},2e3)}catch(C){m(C.message||"Failed to create account")}finally{u(!1)}},P=(C,I)=>{a(_=>({..._,[C]:I}))};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(J,{to:"/login",className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl shadow-2xl mb-4",children:e.jsx(X,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Join FieldForge"}),e.jsx("p",{className:"text-slate-400",children:"Create your construction management account"})]}),e.jsx("div",{className:"flex items-center justify-center mb-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${r>=1?"bg-amber-500 text-white":"bg-slate-700 text-slate-400"}`,children:"1"}),e.jsx("div",{className:`w-20 h-1 ${r>=2?"bg-amber-500":"bg-slate-700"}`}),e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${r>=2?"bg-amber-500 text-white":"bg-slate-700 text-slate-400"}`,children:"2"})]})}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-6",children:[c&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-500/10 border border-red-500/50 rounded-lg text-red-400 mb-4",children:[e.jsx(te,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:c})]}),d&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-green-500/10 border border-green-500/50 rounded-lg text-green-400 mb-4",children:[e.jsx(U,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:"Account created! Check your email to verify."})]}),r===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Account Details"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[e.jsx(Be,{className:"w-4 h-4 inline mr-1"}),"Email Address *"]}),e.jsx("input",{type:"email",value:s.email,onChange:C=>P("email",C.target.value),placeholder:"foreman@construction.com",required:!0,className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:n?"text":"password",value:s.password,onChange:C=>P("password",C.target.value),placeholder:"Minimum 8 characters",required:!0,className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent pr-12"}),e.jsx("button",{type:"button",onClick:()=>l(!n),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-300",children:n?e.jsx(Lt,{className:"w-5 h-5"}):e.jsx(Ge,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Confirm Password *"}),e.jsx("input",{type:n?"text":"password",value:s.confirmPassword,onChange:C=>P("confirmPassword",C.target.value),placeholder:"Re-enter password",required:!0,className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]})]}),r===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[e.jsx(Vr,{className:"w-4 h-4 inline mr-1"}),"First Name *"]}),e.jsx("input",{type:"text",value:s.firstName,onChange:C=>P("firstName",C.target.value),placeholder:"John",required:!0,className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",value:s.lastName,onChange:C=>P("lastName",C.target.value),placeholder:"Smith",required:!0,className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[e.jsx(dr,{className:"w-4 h-4 inline mr-1"}),"Phone Number"]}),e.jsx("input",{type:"tel",value:s.phone,onChange:C=>P("phone",C.target.value),placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[e.jsx(ae,{className:"w-4 h-4 inline mr-1"}),"Company *"]}),e.jsx("input",{type:"text",value:s.company,onChange:C=>P("company",C.target.value),placeholder:"Construction Company Inc.",required:!0,className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[e.jsx(Xs,{className:"w-4 h-4 inline mr-1"}),"Job Title *"]}),e.jsx("input",{type:"text",value:s.jobTitle,onChange:C=>P("jobTitle",C.target.value),placeholder:"Project Manager",required:!0,className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Employee ID"}),e.jsx("input",{type:"text",value:s.employeeId,onChange:C=>P("employeeId",C.target.value),placeholder:"Optional",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[r>1&&e.jsx("button",{type:"button",onClick:()=>t(r-1),className:"px-4 py-2 text-slate-400 hover:text-white transition-colors",children:"â† Back"}),e.jsx("button",{type:"button",onClick:k,disabled:x,className:"ml-auto px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-lg hover:from-amber-600 hover:to-orange-700 transition-all duration-200 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:x?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-5 h-5 mr-2 animate-spin"}),"Creating Account..."]}):r===2?"Create Account":e.jsxs(e.Fragment,{children:["Next",e.jsx(He,{className:"w-5 h-5 ml-2"})]})})]})]}),e.jsxs("p",{className:"text-center text-sm text-slate-400 mt-6",children:["Already have an account?"," ",e.jsx(J,{to:"/login",className:"text-amber-500 hover:text-amber-400 font-medium",children:"Sign in"})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-2 text-slate-500",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Your data is encrypted and secure"})]})]})})};function Je(r){"@babel/helpers - typeof";return Je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(r)}function re(r,t){if(t.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+t.length+" present")}function H(r){re(1,arguments);var t=Object.prototype.toString.call(r);return r instanceof Date||Je(r)==="object"&&t==="[object Date]"?new Date(r.getTime()):typeof r=="number"||t==="[object Number]"?new Date(r):((typeof r=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var bn={};function yn(){return bn}function Mt(r){var t=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return t.setUTCFullYear(r.getFullYear()),r.getTime()-t.getTime()}function Ae(r,t){re(2,arguments);var s=H(r),a=H(t),n=s.getTime()-a.getTime();return n<0?-1:n>0?1:n}function jn(r,t){re(2,arguments);var s=H(r),a=H(t),n=s.getFullYear()-a.getFullYear(),l=s.getMonth()-a.getMonth();return n*12+l}function vn(r,t){return re(2,arguments),H(r).getTime()-H(t).getTime()}var wn={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},Nn="trunc";function kn(r){return wn[Nn]}function _n(r){re(1,arguments);var t=H(r);return t.setHours(23,59,59,999),t}function Sn(r){re(1,arguments);var t=H(r),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function Cn(r){re(1,arguments);var t=H(r);return _n(t).getTime()===Sn(t).getTime()}function Mn(r,t){re(2,arguments);var s=H(r),a=H(t),n=Ae(s,a),l=Math.abs(jn(s,a)),x;if(l<1)x=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-n*l);var u=Ae(s,a)===-n;Cn(H(r))&&l===1&&Ae(r,a)===1&&(u=!1),x=n*(l-Number(u))}return x===0?0:x}function An(r,t,s){re(2,arguments);var a=vn(r,t)/1e3;return kn()(a)}var Pn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Tn=function(t,s,a){var n,l=Pn[t];return typeof l=="string"?n=l:s===1?n=l.one:n=l.other.replace("{{count}}",s.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function ze(r){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=t.width?String(t.width):r.defaultWidth,a=r.formats[s]||r.formats[r.defaultWidth];return a}}var $n={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},In={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Dn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},En={date:ze({formats:$n,defaultWidth:"full"}),time:ze({formats:In,defaultWidth:"full"}),dateTime:ze({formats:Dn,defaultWidth:"full"})},Rn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Fn=function(t,s,a,n){return Rn[t]};function je(r){return function(t,s){var a=s!=null&&s.context?String(s.context):"standalone",n;if(a==="formatting"&&r.formattingValues){var l=r.defaultFormattingWidth||r.defaultWidth,x=s!=null&&s.width?String(s.width):l;n=r.formattingValues[x]||r.formattingValues[l]}else{var u=r.defaultWidth,c=s!=null&&s.width?String(s.width):r.defaultWidth;n=r.values[c]||r.values[u]}var m=r.argumentCallback?r.argumentCallback(t):t;return n[m]}}var qn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ln={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},On={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Un={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Wn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Vn=function(t,s){var a=Number(t),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Hn={ordinalNumber:Vn,era:je({values:qn,defaultWidth:"wide"}),quarter:je({values:Ln,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:je({values:On,defaultWidth:"wide"}),day:je({values:Un,defaultWidth:"wide"}),dayPeriod:je({values:zn,defaultWidth:"wide",formattingValues:Wn,defaultFormattingWidth:"wide"})};function ve(r){return function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.width,n=a&&r.matchPatterns[a]||r.matchPatterns[r.defaultMatchWidth],l=t.match(n);if(!l)return null;var x=l[0],u=a&&r.parsePatterns[a]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(u)?Jn(u,function(i){return i.test(x)}):Bn(u,function(i){return i.test(x)}),m;m=r.valueCallback?r.valueCallback(c):c,m=s.valueCallback?s.valueCallback(m):m;var d=t.slice(x.length);return{value:m,rest:d}}}function Bn(r,t){for(var s in r)if(r.hasOwnProperty(s)&&t(r[s]))return s}function Jn(r,t){for(var s=0;s<r.length;s++)if(t(r[s]))return s}function Xn(r){return function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.match(r.matchPattern);if(!a)return null;var n=a[0],l=t.match(r.parsePattern);if(!l)return null;var x=r.valueCallback?r.valueCallback(l[0]):l[0];x=s.valueCallback?s.valueCallback(x):x;var u=t.slice(n.length);return{value:x,rest:u}}}var Yn=/^(\d+)(th|st|nd|rd)?/i,Gn=/\d+/i,Qn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Zn={any:[/^b/i,/^(a|c)/i]},Kn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},el={any:[/1/i,/2/i,/3/i,/4/i]},tl={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sl={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},al={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rl={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nl={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ll={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},il={ordinalNumber:Xn({matchPattern:Yn,parsePattern:Gn,valueCallback:function(t){return parseInt(t,10)}}),era:ve({matchPatterns:Qn,defaultMatchWidth:"wide",parsePatterns:Zn,defaultParseWidth:"any"}),quarter:ve({matchPatterns:Kn,defaultMatchWidth:"wide",parsePatterns:el,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:ve({matchPatterns:tl,defaultMatchWidth:"wide",parsePatterns:sl,defaultParseWidth:"any"}),day:ve({matchPatterns:al,defaultMatchWidth:"wide",parsePatterns:rl,defaultParseWidth:"any"}),dayPeriod:ve({matchPatterns:nl,defaultMatchWidth:"any",parsePatterns:ll,defaultParseWidth:"any"})},ol={code:"en-US",formatDistance:Tn,formatLong:En,formatRelative:Fn,localize:Hn,match:il,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Gt(r,t){if(r==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s]);return r}function cl(r){return Gt({},r)}var At=1440,dl=2520,We=43200,ml=86400;function xl(r,t,s){var a,n;re(2,arguments);var l=yn(),x=(a=(n=s==null?void 0:s.locale)!==null&&n!==void 0?n:l.locale)!==null&&a!==void 0?a:ol;if(!x.formatDistance)throw new RangeError("locale must contain formatDistance property");var u=Ae(r,t);if(isNaN(u))throw new RangeError("Invalid time value");var c=Gt(cl(s),{addSuffix:!!(s!=null&&s.addSuffix),comparison:u}),m,d;u>0?(m=H(t),d=H(r)):(m=H(r),d=H(t));var i=An(d,m),g=(Mt(d)-Mt(m))/1e3,y=Math.round((i-g)/60),w;if(y<2)return s!=null&&s.includeSeconds?i<5?x.formatDistance("lessThanXSeconds",5,c):i<10?x.formatDistance("lessThanXSeconds",10,c):i<20?x.formatDistance("lessThanXSeconds",20,c):i<40?x.formatDistance("halfAMinute",0,c):i<60?x.formatDistance("lessThanXMinutes",1,c):x.formatDistance("xMinutes",1,c):y===0?x.formatDistance("lessThanXMinutes",1,c):x.formatDistance("xMinutes",y,c);if(y<45)return x.formatDistance("xMinutes",y,c);if(y<90)return x.formatDistance("aboutXHours",1,c);if(y<At){var k=Math.round(y/60);return x.formatDistance("aboutXHours",k,c)}else{if(y<dl)return x.formatDistance("xDays",1,c);if(y<We){var S=Math.round(y/At);return x.formatDistance("xDays",S,c)}else if(y<ml)return w=Math.round(y/We),x.formatDistance("aboutXMonths",w,c)}if(w=Mn(d,m),w<12){var P=Math.round(y/We);return x.formatDistance("xMonths",P,c)}else{var C=w%12,I=Math.floor(w/12);return C<3?x.formatDistance("aboutXYears",I,c):C<9?x.formatDistance("overXYears",I,c):x.formatDistance("almostXYears",I+1,c)}}function lt(r,t){return re(1,arguments),xl(r,Date.now(),t)}const hl=()=>{const[r,t]=h.useState([]),[s,a]=h.useState(!0),[n,l]=h.useState(""),[x,u]=h.useState("update"),[c,m]=h.useState(null),[d,i]=h.useState([]),[g,y]=h.useState(null);h.useEffect(()=>{k(),w()},[]);const w=async()=>{const{data:{user:_}}=await f.auth.getUser();if(!_)return;const{data:v}=await f.from("projects").select(`
        *,
        project_team!inner(user_id)
      `).eq("project_team.user_id",_.id).eq("project_team.status","active");v&&(i(v),v.length>0&&m(v[0].id))},k=async()=>{const{data:{user:_}}=await f.auth.getUser();if(!_)return;const{data:v}=await f.from("feed_posts").select(`
        *,
        author:user_profiles!feed_posts_author_id_fkey(
          first_name,
          last_name,
          job_title,
          photo_url
        ),
        project:projects!feed_posts_project_id_fkey(
          name,
          project_number
        ),
        reactions:feed_reactions(count),
        comments:feed_comments(count)
      `).order("created_at",{ascending:!1}).limit(50);v&&t(v),a(!1)},S=async()=>{if(!n.trim()||!c)return;const{data:{user:_}}=await f.auth.getUser();if(!_)return;const{error:v}=await f.from("feed_posts").insert({project_id:c,author_id:_.id,post_type:x,content:n,visibility:"project"});v||(l(""),k())},P=async _=>{const{data:{user:v}}=await f.auth.getUser();if(!v)return;const{data:E}=await f.from("feed_reactions").select("id").eq("post_id",_).eq("user_id",v.id).single();E?await f.from("feed_reactions").delete().eq("id",E.id):await f.from("feed_reactions").insert({post_id:_,user_id:v.id,reaction_type:"like"}),k()},C=_=>{switch(_){case"achievement":return e.jsx(_t,{className:"w-5 h-5 text-yellow-400"});case"safety":return e.jsx(F,{className:"w-5 h-5 text-green-400"});case"issue":return e.jsx(oe,{className:"w-5 h-5 text-red-400"});case"milestone":return e.jsx(U,{className:"w-5 h-5 text-blue-400"});case"photo":return e.jsx(Pe,{className:"w-5 h-5 text-purple-400"});case"video":return e.jsx(Jr,{className:"w-5 h-5 text-pink-400"});default:return e.jsx(X,{className:"w-5 h-5 text-amber-400"})}},I=[{value:"update",label:"Update",icon:X},{value:"achievement",label:"Achievement",icon:_t},{value:"safety",label:"Safety",icon:F},{value:"milestone",label:"Milestone",icon:U},{value:"issue",label:"Issue",icon:oe},{value:"photo",label:"Photo",icon:Pe}];return e.jsxs("div",{className:"min-h-screen bg-black",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-gray-900/95 backdrop-blur-xl border-b border-gray-800",children:e.jsx("div",{className:"max-w-2xl mx-auto p-4",children:e.jsx("div",{className:"bg-gray-800/50 rounded-2xl p-4 border border-gray-700",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-600 rounded-full flex items-center justify-center",children:e.jsx(ne,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:n,onChange:_=>l(_.target.value),placeholder:"Share an update from the field...",className:"w-full bg-transparent text-white placeholder-gray-500 resize-none focus:outline-none text-lg",rows:2}),e.jsx("div",{className:"flex items-center space-x-2 mt-3 mb-3",children:I.map(_=>{const v=_.icon;return e.jsxs("button",{onClick:()=>u(_.value),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all flex items-center space-x-1.5 ${x===_.value?"bg-amber-500 text-black":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:_.label})]},_.value)})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("select",{value:c||"",onChange:_=>m(_.target.value),className:"px-3 py-1.5 bg-gray-700 border border-gray-600 rounded-lg text-sm text-white focus:border-amber-500 focus:outline-none",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Project"}),d.map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-amber-400 transition-colors",children:e.jsx(Ea,{className:"w-5 h-5"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-amber-400 transition-colors",children:e.jsx(Qe,{className:"w-5 h-5"})}),e.jsx("button",{onClick:S,disabled:!n.trim()||!c,className:"px-4 py-1.5 bg-gradient-to-r from-amber-500 to-orange-600 rounded-full font-semibold text-black hover:shadow-lg hover:shadow-amber-500/25 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Post"})]})]})]})]})})})}),e.jsx("div",{className:"max-w-2xl mx-auto pb-20",children:s?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500"})}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(W,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No posts yet. Be the first to share!"})]}):r.map(_=>{var v,E,O,L,V,o,p,N,A,j,$;return e.jsx("div",{className:"border-b border-gray-800 hover:bg-gray-900/50 transition-colors",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-bold",children:[(E=(v=_.author)==null?void 0:v.first_name)==null?void 0:E[0],(L=(O=_.author)==null?void 0:O.last_name)==null?void 0:L[0]]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"font-semibold text-white",children:[(V=_.author)==null?void 0:V.first_name," ",(o=_.author)==null?void 0:o.last_name]}),C(_.post_type)]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[e.jsx("span",{children:((p=_.author)==null?void 0:p.job_title)||"Team Member"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:(N=_.project)==null?void 0:N.name}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:lt(new Date(_.created_at),{addSuffix:!0})})]})]})]}),e.jsx("button",{className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(qt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-white text-lg leading-relaxed",children:_.content}),_.tags&&_.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:_.tags.map((q,B)=>e.jsxs("span",{className:"px-2 py-1 bg-gray-800 text-amber-400 rounded-full text-xs",children:["#",q]},B))}),_.media_urls&&_.media_urls.length>0&&e.jsx("div",{className:"mt-3 rounded-xl overflow-hidden",children:e.jsx("img",{src:_.media_urls[0],alt:"Post media",className:"w-full h-auto"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("button",{onClick:()=>P(_.id),className:"flex items-center space-x-1 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition-colors group",children:[e.jsx(Aa,{className:`w-5 h-5 ${(A=_.reactions)!=null&&A.user_reacted?"text-red-500 fill-red-500":"text-gray-400 group-hover:text-red-400"}`}),e.jsx("span",{className:`text-sm ${(j=_.reactions)!=null&&j.user_reacted?"text-red-500":"text-gray-400"}`,children:(($=_.reactions)==null?void 0:$.count)||0})]}),e.jsxs("button",{onClick:()=>y(g===_.id?null:_.id),className:"flex items-center space-x-1 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition-colors group",children:[e.jsx(Qa,{className:"w-5 h-5 text-gray-400 group-hover:text-amber-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:_.comments_count||0})]}),e.jsx("button",{className:"flex items-center space-x-1 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition-colors group",children:e.jsx(_r,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-400"})})]}),e.jsx("button",{className:"p-1.5 rounded-lg hover:bg-gray-800 transition-colors",children:e.jsx(Vs,{className:"w-5 h-5 text-gray-400 hover:text-amber-400"})})]}),g===_.id&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full"}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Add a comment...",className:"w-full px-3 py-2 bg-gray-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20"})}),e.jsx("button",{className:"p-2 text-amber-400 hover:text-amber-300 transition-colors",children:e.jsx(st,{className:"w-5 h-5"})})]})})]})},_.id)})})]})},ul=()=>{const[r,t]=h.useState([{id:"1",role:"assistant",content:"Hello! I'm your AI construction assistant. I can help you with safety protocols, scheduling optimization, resource management, and real-time insights. How can I assist you today?",timestamp:new Date}]),[s,a]=h.useState(""),[n,l]=h.useState(!1),[x,u]=h.useState(!1),[c,m]=h.useState(!1),[d,i]=h.useState(!1),[g,y]=h.useState([]),[w,k]=h.useState(!0),S=h.useRef(null);h.useEffect(()=>{C()},[]),h.useEffect(()=>{P()},[r]);const P=()=>{var o;(o=S.current)==null||o.scrollIntoView({behavior:"smooth"})},C=async()=>{const{data:{user:o}}=await f.auth.getUser();if(!o)return;const{data:p}=await f.from("ai_suggestions").select("*").eq("status","pending").order("impact_score",{ascending:!1}).limit(5);p&&y(p)},I=async()=>{if(!s.trim())return;const o={id:Date.now().toString(),role:"user",content:s,timestamp:new Date};t(p=>[...p,o]),a(""),i(!0),setTimeout(()=>{const p=_(s);t(N=>[...N,p]),i(!1)},1500)},_=o=>{const p=o.toLowerCase();let N="",A=[];return p.includes("safety")?(N="Based on current conditions, I recommend implementing enhanced fall protection protocols for work above 6 feet. The weather forecast shows high winds tomorrow, so consider postponing elevated work. I've also identified 3 safety optimizations that could reduce incident risk by 45%.",A=g.filter(j=>j.suggestion_type==="safety")):p.includes("schedule")||p.includes("timeline")?(N="Your current project is tracking 2 days ahead of schedule. However, material deliveries for Phase 3 may cause a bottleneck next week. I suggest pre-ordering supplies and adjusting crew assignments to maintain momentum. Critical path analysis shows potential for 15% time savings.",A=g.filter(j=>j.suggestion_type==="schedule")):p.includes("crew")||p.includes("team")?(N="Current crew efficiency is at 87%. I've identified skill gaps in electrical work that could be addressed with targeted training. Recommend redistributing teams to balance workload - Crew A is at 95% capacity while Crew B is at 70%.",A=g.filter(j=>j.suggestion_type==="resource")):p.includes("weather")?N="Weather analysis: Clear conditions for the next 3 days, then 60% chance of rain Thursday-Friday. Temperature dropping to 45Â°F overnight. Consider scheduling concrete pours for tomorrow morning and indoor work for end of week.":p.includes("optimize")||p.includes("improve")?(N="I've analyzed your project data and identified several optimization opportunities: 1) Equipment utilization can be improved by 23% through better scheduling, 2) Material waste can be reduced by implementing just-in-time delivery, 3) Communication delays are causing 1.5 hours of lost productivity daily.",A=g.filter(j=>j.suggestion_type==="optimization")):N="I can help you with various aspects of your construction project. Try asking about safety protocols, schedule optimization, crew management, weather impacts, or quality control. I'm constantly analyzing your project data to provide proactive insights.",{id:Date.now().toString(),role:"assistant",content:N,timestamp:new Date,suggestions:A.slice(0,3)}},v=()=>{l(!n)},E=()=>{u(!x)},O=o=>{switch(o){case"critical":return"text-red-500";case"high":return"text-orange-500";case"medium":return"text-yellow-500";default:return"text-green-500"}},L=o=>{switch(o){case"safety":return F;case"schedule":return ee;case"resource":return W;case"quality":return U;default:return Wt}},V=[{label:"Safety Check",icon:F,query:"What are the current safety concerns?"},{label:"Schedule Status",icon:ee,query:"How is the project schedule looking?"},{label:"Crew Updates",icon:W,query:"Give me a crew efficiency report"},{label:"Weather Impact",icon:me,query:"How will weather affect our work?"}];return e.jsxs("div",{className:`fixed bottom-4 right-4 z-50 ${c?"w-auto":"w-96"}`,children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-t-2xl p-4 cursor-pointer",onClick:()=>m(!c),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ke,{className:"w-8 h-8 text-white"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold",children:"AI Assistant"}),e.jsx("p",{className:"text-purple-100 text-xs",children:"Always learning, always helping"})]})]}),c?e.jsx(vt,{className:"w-5 h-5 text-white"}):e.jsx(Ye,{className:"w-5 h-5 text-white"})]})}),!c&&e.jsxs(e.Fragment,{children:[w&&g.length>0&&e.jsxs("div",{className:"bg-gray-900 border-x border-gray-800 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"AI Insights"}),e.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-300",children:e.jsx(vt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2",children:g.slice(0,2).map(o=>{const p=L(o.suggestion_type);return e.jsx("div",{className:"bg-gray-800/50 rounded-lg p-2 border border-gray-700 hover:border-purple-500/50 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(p,{className:`w-4 h-4 mt-0.5 ${O(o.priority)}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-white font-medium truncate",children:o.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`text-xs ${O(o.priority)}`,children:o.priority}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Impact: ",o.impact_score,"%"]})]})]})]})},o.id)})})]}),e.jsx("div",{className:"bg-gray-900 border-x border-gray-800 h-96 overflow-y-auto",children:e.jsxs("div",{className:"p-4 space-y-4",children:[r.map(o=>e.jsx("div",{className:`flex ${o.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] ${o.role==="user"?"order-2":"order-1"}`,children:[e.jsxs("div",{className:`rounded-2xl px-4 py-2 ${o.role==="user"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-800 text-gray-100 border border-gray-700"}`,children:[o.role==="assistant"&&e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Ft,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"AI Assistant"})]}),e.jsx("p",{className:"text-sm",children:o.content}),o.suggestions&&o.suggestions.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Related insights:"}),o.suggestions.map(p=>e.jsx("div",{className:"bg-gray-900/50 rounded p-2",children:e.jsx("p",{className:"text-xs text-purple-300",children:p.title})},p.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 px-2",children:o.timestamp.toLocaleTimeString()})]})},o.id)),d&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-800 rounded-2xl px-4 py-3 border border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"w-4 h-4 text-purple-400 animate-spin"}),e.jsx("span",{className:"text-sm text-gray-400",children:"AI is thinking..."})]})})}),e.jsx("div",{ref:S})]})}),e.jsx("div",{className:"bg-gray-900 border-x border-gray-800 p-3",children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:V.map((o,p)=>{const N=o.icon;return e.jsxs("button",{onClick:()=>{a(o.query),I()},className:"flex items-center space-x-1 px-3 py-1.5 bg-gray-800 hover:bg-gray-700 rounded-full text-xs text-gray-300 transition-colors",children:[e.jsx(N,{className:"w-3 h-3"}),e.jsx("span",{children:o.label})]},p)})})}),e.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-b-2xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:v,className:`p-2 rounded-lg transition-colors ${n?"bg-red-500 text-white":"bg-gray-800 text-gray-400 hover:text-white"}`,children:n?e.jsx(er,{className:"w-5 h-5"}):e.jsx(sr,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",value:s,onChange:o=>a(o.target.value),onKeyPress:o=>o.key==="Enter"&&I(),placeholder:"Ask me anything...",className:"flex-1 px-3 py-2 bg-gray-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500/20"}),e.jsx("button",{onClick:E,className:`p-2 rounded-lg transition-colors ${x?"bg-purple-500 text-white":"bg-gray-800 text-gray-400 hover:text-white"}`,children:x?e.jsx(Bt,{className:"w-5 h-5"}):e.jsx(Ht,{className:"w-5 h-5"})}),e.jsx("button",{onClick:I,disabled:!s.trim(),className:"p-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg text-white hover:shadow-lg hover:shadow-purple-500/25 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(st,{className:"w-5 h-5"})})]})})]})]})},pl=()=>{const[r,t]=h.useState([{label:"Productivity",value:87,unit:"%",change:5.2,trend:"up",color:"from-cyan-500 to-blue-600",icon:e.jsx(me,{className:"w-5 h-5"})},{label:"Safety Score",value:94,unit:"/100",change:2.1,trend:"up",color:"from-green-500 to-emerald-600",icon:e.jsx(F,{className:"w-5 h-5"})},{label:"Active Workers",value:47,unit:"",change:-3,trend:"down",color:"from-purple-500 to-pink-600",icon:e.jsx(W,{className:"w-5 h-5"})},{label:"Energy Usage",value:342,unit:"kW",change:12.5,trend:"up",color:"from-yellow-500 to-orange-600",icon:e.jsx(X,{className:"w-5 h-5"})},{label:"Completion",value:68,unit:"%",change:1.8,trend:"up",color:"from-indigo-500 to-purple-600",icon:e.jsx(U,{className:"w-5 h-5"})},{label:"Budget Used",value:62,unit:"%",change:0,trend:"stable",color:"from-pink-500 to-rose-600",icon:e.jsx(Re,{className:"w-5 h-5"})}]),[s,a]=h.useState(()=>Array.from({length:20},(i,g)=>({timestamp:new Date(Date.now()-(19-g)*3e3),value:50+Math.random()*50}))),[n,l]=h.useState(!1),[x,u]=h.useState(null);h.useEffect(()=>{const i=setInterval(()=>{t(g=>g.map(y=>({...y,value:Math.max(0,Math.min(100,y.value+(Math.random()-.5)*2)),change:(Math.random()-.5)*5}))),a(g=>[...g.slice(1),{timestamp:new Date,value:50+Math.random()*50}]),l(!0),setTimeout(()=>l(!1),1e3)},3e3);return()=>clearInterval(i)},[]);const c=i=>{switch(i){case"up":return e.jsx(Rt,{className:"w-4 h-4"});case"down":return e.jsx(Et,{className:"w-4 h-4"});default:return e.jsx(rr,{className:"w-4 h-4"})}},m=(i,g)=>i==="stable"?"text-gray-400":i==="up"?g?"text-green-400":"text-red-400":g?"text-red-400":"text-green-400",d=({data:i})=>{const g=Math.max(...i.map(k=>k.value)),y=Math.min(...i.map(k=>k.value)),w=g-y||1;return e.jsx("div",{className:"relative h-16 w-full",children:e.jsxs("svg",{className:"absolute inset-0 w-full h-full",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgb(168, 85, 247)",stopOpacity:"0.8"}),e.jsx("stop",{offset:"100%",stopColor:"rgb(168, 85, 247)",stopOpacity:"0"})]})}),e.jsx("path",{d:`
              M 0,16
              ${i.map((k,S)=>{const P=S/(i.length-1)*100,C=16-(k.value-y)/w*16;return`L ${P},${C}`}).join(" ")}
              L 100,16
              Z
            `,fill:"url(#gradient)",className:"animate-pulse-slow"}),e.jsx("path",{d:i.map((k,S)=>{const P=S/(i.length-1)*100,C=16-(k.value-y)/w*16;return`${S===0?"M":"L"} ${P},${C}`}).join(" "),fill:"none",stroke:"rgb(168, 85, 247)",strokeWidth:"2"}),i.map((k,S)=>{const P=S/(i.length-1)*100,C=16-(k.value-y)/w*16;return e.jsx("circle",{cx:P,cy:C,r:S===i.length-1?"3":"1.5",fill:"rgb(168, 85, 247)",className:S===i.length-1?"animate-pulse":""},S)})]})})};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"Real-Time Analytics"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Live project metrics updated every 3 seconds"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 bg-green-500 rounded-full ${n?"animate-ping":""}`}),e.jsx("span",{className:"text-sm text-gray-400",children:"LIVE"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map((i,g)=>e.jsxs("div",{onClick:()=>u(x===g?null:g),className:`relative group cursor-pointer transition-all duration-300 ${x===g?"scale-105":""}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r opacity-10 group-hover:opacity-20 transition-opacity rounded-2xl blur-xl",style:{backgroundImage:`linear-gradient(to right, ${i.color.replace("from-","").replace(" to-",", ")})`}}),e.jsxs("div",{className:"relative bg-gray-900/90 backdrop-blur-xl border border-gray-800 rounded-2xl p-6 hover:border-purple-500/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 bg-gradient-to-r ${i.color} rounded-lg text-white`,children:i.icon}),e.jsx("span",{className:"text-gray-400 text-sm font-medium",children:i.label})]}),e.jsxs("div",{className:`flex items-center space-x-1 ${m(i.trend,i.trend==="up")}`,children:[c(i.trend),e.jsxs("span",{className:"text-xs font-semibold",children:[Math.abs(i.change).toFixed(1),"%"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-baseline space-x-1",children:[e.jsx("span",{className:"text-3xl font-bold text-white",children:i.value.toFixed(i.unit==="%"?0:1)}),e.jsx("span",{className:"text-gray-500 text-sm",children:i.unit})]})}),e.jsx(d,{data:s}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(me,{className:"w-4 h-4 text-purple-400 animate-pulse"})})]})]},g))}),e.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-xl border border-gray-800 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[e.jsx(Ke,{className:"w-6 h-6 text-purple-400"}),e.jsx("span",{children:"Activity Stream"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"w-5 h-5 text-cyan-400 animate-pulse"}),e.jsx("span",{className:"text-xs text-gray-400",children:"STREAMING"})]})]}),e.jsx("div",{className:"space-y-3",children:[{icon:e.jsx(ne,{}),text:"Crew A completed foundation pour",time:"Just now",type:"success"},{icon:e.jsx(F,{}),text:"Safety inspection passed - Zone 3",time:"2 min ago",type:"info"},{icon:e.jsx(oe,{}),text:"Weather alert: High winds expected",time:"5 min ago",type:"warning"},{icon:e.jsx(U,{}),text:"Milestone reached: Phase 2 complete",time:"8 min ago",type:"success"},{icon:e.jsx(W,{}),text:"5 workers checked in - East entrance",time:"12 min ago",type:"info"}].map((i,g)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-lg hover:bg-gray-800 transition-colors",children:[e.jsx("div",{className:`p-2 rounded-lg ${i.type==="success"?"bg-green-500/20 text-green-400":i.type==="warning"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:i.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white text-sm",children:i.text}),e.jsx("p",{className:"text-gray-500 text-xs",children:i.time})]}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]},g))})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Overall Project Health"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-gray-700"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:351.86,strokeDashoffset:351.86*(1-.89),className:"text-purple-400 transition-all duration-1000"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:"89%"}),e.jsx("div",{className:"text-xs text-purple-400",children:"Excellent"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"On Schedule"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Within Budget"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Minor Issues"})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Next Update"}),e.jsx("div",{className:"text-2xl font-mono text-purple-400",children:"00:02:47"})]})]})})]})};var gl={};const fl=()=>{const[r,t]=h.useState([]),[s,a]=h.useState("default"),[n,l]=h.useState(!1),[x,u]=h.useState(!1),[c,m]=h.useState(0),[d,i]=h.useState(!0);h.useEffect(()=>{g(),P(),C(),"serviceWorker"in navigator&&"PushManager"in window&&w()},[]),h.useEffect(()=>{m(r.filter(p=>!p.read).length)},[r]);const g=()=>{"Notification"in window&&(a(Notification.permission),l(Notification.permission==="granted"))},y=async()=>{if("Notification"in window){const p=await Notification.requestPermission();a(p),l(p==="granted"),p==="granted"&&_({id:Date.now().toString(),type:"success",title:"Notifications Enabled",message:"You'll now receive important updates from FieldForge"})}},w=async()=>{try{const N=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:k(gl.REACT_APP_VAPID_PUBLIC_KEY||"")});await S(N)}catch(p){console.error("Failed to subscribe to push notifications:",p)}},k=p=>{const N="=".repeat((4-p.length%4)%4),A=(p+N).replace(/\-/g,"+").replace(/_/g,"/"),j=window.atob(A),$=new Uint8Array(j.length);for(let q=0;q<j.length;++q)$[q]=j.charCodeAt(q);return $},S=async p=>{const{data:{user:N}}=await f.auth.getUser();N&&console.log("Saving push subscription for user:",N.id)},P=()=>{const p=localStorage.getItem("fieldforge_notifications");t(p?JSON.parse(p).map(N=>({...N,timestamp:new Date(N.timestamp)})):[{id:"1",type:"safety",title:"Safety Alert",message:"High wind advisory - Secure all materials and equipment",timestamp:new Date(Date.now()-5*60*1e3),read:!1},{id:"2",type:"success",title:"Milestone Achieved",message:"Foundation pour completed ahead of schedule",timestamp:new Date(Date.now()-30*60*1e3),read:!1},{id:"3",type:"info",title:"New Team Member",message:"John Smith has joined Crew A as an electrician",timestamp:new Date(Date.now()-2*60*60*1e3),read:!0}])},C=()=>{const p=f.channel("notifications").on("broadcast",{event:"new_notification"},N=>{const A={id:N.id||Date.now().toString(),type:N.type||"info",title:N.title,message:N.message,timestamp:new Date,read:!1,actionUrl:N.actionUrl,metadata:N.metadata};I(A),_(A)}).subscribe();return()=>{f.removeChannel(p)}},I=p=>{t(N=>{const A=[p,...N].slice(0,50);return localStorage.setItem("fieldforge_notifications",JSON.stringify(A)),A}),d&&v()},_=p=>{if(s==="granted"&&document.hidden){const N=new Notification(p.title,{body:p.message,icon:"/icon-192.png",badge:"/icon-192.png",tag:p.id,requireInteraction:p.type==="safety"||p.type==="warning"});N.onclick=()=>{window.focus(),p.actionUrl&&(window.location.href=p.actionUrl),N.close()}}},v=()=>{const p=new Audio("/notification.mp3");p.volume=.3,p.play().catch(()=>{})},E=p=>{t(N=>{const A=N.map(j=>j.id===p?{...j,read:!0}:j);return localStorage.setItem("fieldforge_notifications",JSON.stringify(A)),A})},O=()=>{t(p=>{const N=p.map(A=>({...A,read:!0}));return localStorage.setItem("fieldforge_notifications",JSON.stringify(N)),N})},L=p=>{t(N=>{const A=N.filter(j=>j.id!==p);return localStorage.setItem("fieldforge_notifications",JSON.stringify(A)),A})},V=p=>{switch(p){case"safety":return e.jsx(F,{className:"w-5 h-5"});case"success":return e.jsx(U,{className:"w-5 h-5"});case"warning":return e.jsx(oe,{className:"w-5 h-5"});case"error":return e.jsx(te,{className:"w-5 h-5"});case"achievement":return e.jsx(Wt,{className:"w-5 h-5"});default:return e.jsx(Fa,{className:"w-5 h-5"})}},o=p=>{switch(p){case"safety":return"bg-green-500/20 text-green-400 border-green-500/30";case"success":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"warning":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"error":return"bg-red-500/20 text-red-400 border-red-500/30";case"achievement":return"bg-purple-500/20 text-purple-400 border-purple-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>u(!x),className:"relative p-2 text-gray-400 hover:text-white transition-colors",children:[n?e.jsx(Ce,{className:"w-6 h-6"}):e.jsx(Us,{className:"w-6 h-6"}),c>0&&e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-white font-bold",children:c>9?"9+":c})})]}),x&&e.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>u(!1),children:e.jsxs("div",{className:"absolute right-4 top-16 w-96 max-h-[600px] bg-gray-900 border border-gray-800 rounded-2xl shadow-2xl overflow-hidden",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"w-5 h-5 text-white"}),e.jsx("h3",{className:"text-white font-bold",children:"Notifications"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>i(!d),className:"p-1 text-white/80 hover:text-white transition-colors",children:d?e.jsx(Ht,{className:"w-4 h-4"}):e.jsx(Bt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u(!1),className:"p-1 text-white/80 hover:text-white transition-colors",children:e.jsx(K,{className:"w-4 h-4"})})]})]}),c>0&&e.jsx("button",{onClick:O,className:"mt-2 text-xs text-white/80 hover:text-white transition-colors",children:"Mark all as read"})]}),s!=="granted"&&e.jsx("div",{className:"p-4 bg-yellow-500/10 border-b border-yellow-500/20",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(te,{className:"w-5 h-5 text-yellow-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-white font-medium",children:"Enable Push Notifications"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Get real-time alerts for important updates"}),e.jsx("button",{onClick:y,className:"mt-2 px-3 py-1 bg-yellow-500 text-black rounded-full text-xs font-medium hover:bg-yellow-400 transition-colors",children:"Enable Notifications"})]})]})}),e.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:r.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Ce,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No notifications yet"})]}):e.jsx("div",{className:"p-2",children:r.map(p=>e.jsx("div",{className:`mb-2 p-3 rounded-lg border transition-all cursor-pointer ${p.read?"opacity-60":""} ${o(p.type)} hover:bg-gray-800/50`,onClick:()=>E(p.id),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"mt-0.5",children:V(p.type)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-white",children:p.title}),e.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:p.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:lt(p.timestamp,{addSuffix:!0})})]}),e.jsx("button",{onClick:N=>{N.stopPropagation(),L(p.id)},className:"p-1 text-gray-500 hover:text-red-400 transition-colors",children:e.jsx(K,{className:"w-4 h-4"})})]})})]})},p.id))})})]})})]})},bl=({onClose:r})=>{const t=[{id:"1",type:"safety",title:"Safety Alert",message:"High winds expected - secure all materials",time:"5 min ago",icon:oe,color:"text-orange-500 bg-orange-500/10"},{id:"2",type:"success",title:"Inspection Passed",message:"Foundation inspection completed successfully",time:"1 hour ago",icon:U,color:"text-green-500 bg-green-500/10"},{id:"3",type:"team",title:"Crew Update",message:"Crew B has started work on Pad 3",time:"2 hours ago",icon:W,color:"text-blue-500 bg-blue-500/10"}];return e.jsxs("div",{className:"fixed right-4 top-20 w-96 bg-slate-800 border border-slate-700 rounded-xl shadow-2xl z-50",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[e.jsx(Ce,{className:"w-5 h-5 mr-2 text-amber-500"}),"Notifications"]}),e.jsx("button",{onClick:r,className:"text-slate-400 hover:text-white",children:e.jsx(K,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.map(s=>e.jsx("div",{className:"p-4 border-b border-slate-700 hover:bg-slate-700/30 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.color}`,children:e.jsx(s.icon,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-medium text-sm",children:s.title}),e.jsx("p",{className:"text-slate-400 text-xs mt-1",children:s.message}),e.jsx("p",{className:"text-slate-500 text-xs mt-2",children:s.time})]})]})},s.id))}),e.jsx("div",{className:"p-4 border-t border-slate-700",children:e.jsx("button",{className:"w-full text-center text-amber-500 hover:text-amber-400 text-sm font-medium",children:"View All Notifications"})})]})},yl=()=>{const[r,t]=h.useState({temp:72,condition:"Partly Cloudy",wind:12,humidity:65,alert:!1});return e.jsxs("div",{className:"flex items-center space-x-3 px-3 py-1.5 bg-slate-700/50 rounded-lg",children:[e.jsx(_e,{className:"w-4 h-4 text-slate-400"}),e.jsxs("span",{className:"text-sm text-white font-medium",children:[r.temp,"Â°F"]}),e.jsx("span",{className:"text-xs text-slate-400",children:r.condition}),r.alert&&e.jsx(oe,{className:"w-4 h-4 text-orange-500"})]})},jl=({session:r})=>{var g,y;const[t,s]=h.useState(!1),[a,n]=h.useState(!1),l=Tt(),x=Ie(),u=r.user,c=async()=>{await f.auth.signOut(),x("/login")},m=[{label:"Dashboard",icon:Ua,path:"/dashboard",badge:null,color:"text-amber-500"},{label:"Social Feed",icon:Te,path:"/feed",badge:"NEW",badgeColor:"bg-cyan-500",color:"text-cyan-500"},{label:"Live Analytics",icon:me,path:"/analytics",badge:"LIVE",badgeColor:"bg-purple-500",color:"text-purple-500"},{label:"Projects",icon:ae,path:"/projects",badge:null,color:"text-blue-500"},{label:"Field Operations",icon:ne,path:"/field",badge:null,color:"text-green-500",subItems:[{label:"Daily Operations",path:"/field"},{label:"Crew Management",path:"/field/crews"},{label:"Time Tracking",path:"/field/time"},{label:"Receipt Management",path:"/field/receipts"}]},{label:"Safety",icon:F,path:"/safety",badge:null,color:"text-red-500",subItems:[{label:"Safety Hub",path:"/safety"},{label:"Briefings",path:"/safety/briefing"},{label:"Incidents",path:"/safety/incidents"},{label:"Permits",path:"/safety/permits"}]},{label:"Equipment",icon:Fe,path:"/equipment",badge:null,color:"text-blue-500",subItems:[{label:"Equipment Hub",path:"/equipment"},{label:"Inventory",path:"/equipment/inventory"},{label:"Maintenance",path:"/equipment/maintenance"}]},{label:"QAQC",icon:Ee,path:"/qaqc",badge:"3",badgeColor:"bg-orange-500",color:"text-orange-500",subItems:[{label:"QAQC Hub",path:"/qaqc"},{label:"Inspections",path:"/qaqc/inspections"},{label:"Testing",path:"/qaqc/testing"}]},{label:"Documents",icon:Z,path:"/documents",badge:null,color:"text-purple-500",subItems:[{label:"Document Hub",path:"/documents"},{label:"Drawings",path:"/documents/drawings"},{label:"Submittals",path:"/documents/submittals"}]},{label:"Schedule",icon:ee,path:"/schedule",badge:null,color:"text-cyan-500",subItems:[{label:"Master Schedule",path:"/schedule"},{label:"3-Week Lookahead",path:"/schedule/lookahead"},{label:"Outages",path:"/schedule/outages"}]},{label:"Weather",icon:_e,path:"/weather",badge:null,color:"text-sky-500"},{label:"Messages",icon:Te,path:"/messages",badge:"5",badgeColor:"bg-indigo-500",color:"text-indigo-500"},{label:"3D Map",icon:Ze,path:"/map",badge:"NEW",badgeColor:"bg-emerald-500",color:"text-emerald-500"},{label:"AI Assistant",icon:ke,path:"/ai",badge:"BETA",badgeColor:"bg-violet-500",color:"text-violet-500"}],d=w=>l.pathname===w,i=w=>{var k;return(k=w.subItems)==null?void 0:k.some(S=>l.pathname===S.path)};return e.jsxs("div",{className:"min-h-screen bg-slate-900 flex",children:[e.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-64 bg-slate-800/95 backdrop-blur-lg border-r border-slate-700
        transform transition-transform duration-300 lg:translate-x-0 lg:static lg:inset-0
        ${t?"translate-x-0":"-translate-x-full"}
      `,children:[e.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-slate-700",children:[e.jsxs(J,{to:"/dashboard",className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg flex items-center justify-center",children:e.jsx(X,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"FieldForge"}),e.jsx("p",{className:"text-xs text-amber-500",children:"T&D Construction"})]})]}),e.jsx("button",{onClick:()=>s(!1),className:"lg:hidden text-slate-400 hover:text-white",children:e.jsx(K,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"p-4 space-y-1 overflow-y-auto h-[calc(100vh-8rem)]",children:m.map(w=>e.jsxs("div",{children:[e.jsxs(J,{to:w.path,className:`
                  flex items-center justify-between px-3 py-2 rounded-lg transition-all
                  ${d(w.path)||i(w)?"bg-slate-700/50 text-white":"text-slate-400 hover:bg-slate-700/30 hover:text-white"}
                `,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(w.icon,{className:`w-5 h-5 ${w.color}`}),e.jsx("span",{className:"font-medium",children:w.label})]}),w.badge&&e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full text-white ${w.badgeColor||"bg-slate-600"}`,children:w.badge})]}),w.subItems&&i(w)&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:w.subItems.map(k=>e.jsx(J,{to:k.path,className:`
                        block px-3 py-1.5 rounded text-sm transition-all
                        ${d(k.path)?"text-amber-500 bg-slate-700/30":"text-slate-500 hover:text-slate-300"}
                      `,children:k.label},k.path))})]},w.path))}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-slate-700 bg-slate-800/95",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-amber-500 to-orange-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-white",children:(g=u.email)==null?void 0:g[0].toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:(y=u.email)==null?void 0:y.split("@")[0]}),e.jsx("p",{className:"text-xs text-slate-400",children:"Field Supervisor"})]})]}),e.jsx("button",{onClick:c,className:"text-slate-400 hover:text-red-400 transition-colors",title:"Sign Out",children:e.jsx(Va,{className:"w-5 h-5"})})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("header",{className:"h-16 bg-slate-800/50 backdrop-blur-md border-b border-slate-700 px-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>s(!0),className:"lg:hidden text-slate-400 hover:text-white",children:e.jsx(Ya,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1.5 bg-slate-700/50 rounded-lg",children:[e.jsx(ae,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"text-sm font-medium text-white",children:"Demo 138kV Substation"}),e.jsx(Ye,{className:"w-4 h-4 text-slate-400"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-slate-400",children:"Systems Online"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(yl,{}),e.jsxs("button",{className:"flex items-center space-x-2 px-3 py-1.5 bg-red-500/10 hover:bg-red-500/20 border border-red-500/50 rounded-lg transition-colors",children:[e.jsx(ur,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-sm font-medium text-red-500",children:"Emergency"})]}),e.jsx(fl,{}),e.jsx(J,{to:"/settings",className:"p-2 text-slate-400 hover:text-white transition-colors",children:e.jsx(Nr,{className:"w-5 h-5"})})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"max-w-[1920px] mx-auto",children:e.jsx(os,{})})})]}),a&&e.jsx(bl,{onClose:()=>n(!1)}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>s(!1)})]})},vl=()=>{const r=Tt(),t=[{icon:Ia,label:"Home",path:"/dashboard",color:"text-amber-500"},{icon:Te,label:"Feed",path:"/feed",color:"text-cyan-500"},{icon:LayoutDashboard,label:"Analytics",path:"/analytics",color:"text-purple-500"},{icon:ne,label:"Field",path:"/field",color:"text-green-500"},{icon:F,label:"Safety",path:"/safety",color:"text-red-500"}],s=a=>r.pathname===a;return e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-slate-900/95 backdrop-blur-lg border-t border-slate-700 lg:hidden z-50",children:e.jsx("div",{className:"flex items-center justify-around h-16 px-2",children:t.map(a=>e.jsxs(J,{to:a.path,className:`flex flex-col items-center justify-center flex-1 py-2 px-1 rounded-lg transition-all ${s(a.path)?"bg-slate-800 text-white":"text-slate-400 hover:text-white"}`,children:[e.jsx(a.icon,{className:`w-5 h-5 mb-1 ${s(a.path)?a.color:""}`}),e.jsx("span",{className:"text-xs font-medium",children:a.label})]},a.path))})})},wl=()=>{const[r,t]=h.useState([]),[s,a]=h.useState([]),[n,l]=h.useState(!0);h.useEffect(()=>{x()},[]);const x=async()=>{t([{title:"Project Progress",value:67,change:5,trend:"up",icon:Pr,color:"text-amber-500",unit:"%"},{title:"Safety Score",value:98.5,change:.5,trend:"up",icon:F,color:"text-green-500",unit:"%"},{title:"Active Crews",value:8,change:2,trend:"up",icon:W,color:"text-blue-500",unit:"teams"},{title:"Equipment Utilization",value:85,change:-3,trend:"down",icon:Fr,color:"text-purple-500",unit:"%"},{title:"Days Without Incident",value:142,change:1,trend:"up",icon:ne,color:"text-emerald-500",unit:"days"},{title:"Open RFIs",value:12,change:-2,trend:"down",icon:Z,color:"text-orange-500",unit:"items"},{title:"Schedule Variance",value:-2,change:1,trend:"up",icon:ee,color:"text-red-500",unit:"days"},{title:"Budget Utilization",value:62,change:3,trend:"neutral",icon:Re,color:"text-cyan-500",unit:"%"}]),a([{id:"1",type:"safety",title:"Morning Safety Briefing Completed",description:"Crew A completed JSA for 138kV terminations",timestamp:new Date(Date.now()-1e3*60*30),priority:"medium",user:"John Smith"},{id:"2",type:"equipment",title:"Transformer Delivered",description:"138/13.8kV transformer arrived on site",timestamp:new Date(Date.now()-1e3*60*60),priority:"high",user:"Mike Johnson"},{id:"3",type:"inspection",title:"Foundation Inspection Passed",description:"Pad 3 foundation approved by QC",timestamp:new Date(Date.now()-1e3*60*90),priority:"medium",user:"Sarah Chen"},{id:"4",type:"weather",title:"Weather Alert",description:"High winds expected tomorrow - 25mph gusts",timestamp:new Date(Date.now()-1e3*60*120),priority:"high",user:"System"},{id:"5",type:"document",title:"New RFI Submitted",description:"RFI-045: Clarification on relay settings",timestamp:new Date(Date.now()-1e3*60*180),priority:"medium",user:"David Lee"}]),l(!1)},u=d=>{switch(d){case"safety":return F;case"equipment":return Fe;case"inspection":return U;case"weather":return oe;case"document":return Z;case"crew":return W;default:return me}},c=d=>{switch(d){case"safety":return"text-green-500 bg-green-500/10";case"equipment":return"text-blue-500 bg-blue-500/10";case"inspection":return"text-purple-500 bg-purple-500/10";case"weather":return"text-orange-500 bg-orange-500/10";case"document":return"text-cyan-500 bg-cyan-500/10";case"crew":return"text-indigo-500 bg-indigo-500/10";default:return"text-slate-500 bg-slate-500/10"}},m=d=>{const i=Date.now()-d.getTime(),g=Math.floor(i/6e4);if(g<60)return`${g}m ago`;const y=Math.floor(g/60);return y<24?`${y}h ago`:`${Math.floor(y/24)}d ago`};return n?e.jsx("div",{className:"flex items-center justify-center min-h-[600px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400",children:"Loading dashboard..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Construction Dashboard"}),e.jsxs("p",{className:"text-slate-400 mt-1",children:["Demo 138kV Substation Upgrade â€¢ ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(J,{to:"/field",className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-medium transition-colors flex items-center space-x-2",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{children:"Daily Report"})]}),e.jsxs(J,{to:"/safety/briefing",className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-colors flex items-center space-x-2",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("span",{children:"Safety Brief"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:r.map(d=>e.jsx("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-5 hover:bg-slate-800/70 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-slate-400 text-sm font-medium",children:d.title}),e.jsxs("div",{className:"flex items-baseline mt-2",children:[e.jsx("span",{className:"text-3xl font-bold text-white",children:d.value}),d.unit&&e.jsx("span",{className:"text-slate-400 text-sm ml-1",children:d.unit})]}),e.jsxs("div",{className:"flex items-center mt-3",children:[d.trend==="up"?e.jsx(Rt,{className:"w-4 h-4 text-green-500 mr-1"}):d.trend==="down"?e.jsx(Et,{className:"w-4 h-4 text-red-500 mr-1"}):e.jsx("div",{className:"w-4 h-4 bg-slate-600 rounded-full mr-1"}),e.jsxs("span",{className:`text-sm ${d.trend==="up"?"text-green-500":d.trend==="down"?"text-red-500":"text-slate-500"}`,children:[Math.abs(d.change),"% from yesterday"]})]})]}),e.jsx("div",{className:`p-3 rounded-lg bg-slate-700/50 ${d.color}`,children:e.jsx(d.icon,{className:"w-6 h-6"})})]})},d.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center",children:[e.jsx(ee,{className:"w-5 h-5 mr-2 text-amber-500"}),"Project Timeline"]}),e.jsx(J,{to:"/schedule",className:"text-amber-500 hover:text-amber-400 text-sm font-medium",children:"View Full Schedule â†’"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-orange-500 rounded-full",style:{width:"67%"}})}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-slate-400",children:"Start: Jan 15, 2025"}),e.jsx("span",{className:"text-xs font-bold text-amber-500",children:"Current: 67% Complete"}),e.jsx("span",{className:"text-xs text-slate-400",children:"End: Jul 15, 2025"})]})]}),e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-400 uppercase tracking-wider",children:"Upcoming Milestones"}),[{name:"Foundation Complete",date:"Nov 15",status:"on-track"},{name:"Equipment Delivery",date:"Nov 20",status:"at-risk"},{name:"Primary Testing",date:"Dec 1",status:"on-track"},{name:"Energization",date:"Dec 15",status:"on-track"}].map(d=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-slate-700/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${d.status==="on-track"?"bg-green-500":"bg-orange-500"}`}),e.jsx("span",{className:"text-white font-medium",children:d.name})]}),e.jsx("span",{className:"text-sm text-slate-400",children:d.date})]},d.name))]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center",children:[e.jsx(me,{className:"w-5 h-5 mr-2 text-amber-500"}),"Recent Activity"]}),e.jsx("button",{className:"text-amber-500 hover:text-amber-400 text-sm font-medium",children:"View All â†’"})]}),e.jsx("div",{className:"space-y-3",children:s.map(d=>{const i=u(d.type),g=c(d.type);return e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-slate-700/30 transition-colors cursor-pointer",children:[e.jsx("div",{className:`p-2 rounded-lg ${g}`,children:e.jsx(i,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium text-sm",children:d.title}),e.jsx("p",{className:"text-slate-400 text-xs mt-0.5",children:d.description}),e.jsxs("div",{className:"flex items-center mt-2 text-xs text-slate-500",children:[e.jsx("span",{children:d.user}),e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsx("span",{children:m(d.timestamp)})]})]})]},d.id)})})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Start Daily Report",icon:Z,color:"bg-blue-500",path:"/field"},{label:"Equipment Check",icon:rt,color:"bg-purple-500",path:"/equipment"},{label:"Submit RFI",icon:Z,color:"bg-cyan-500",path:"/documents"},{label:"View 3D Map",icon:Qe,color:"bg-emerald-500",path:"/map"}].map(d=>e.jsxs(J,{to:d.path,className:"group relative overflow-hidden bg-slate-800/50 hover:bg-slate-800/70 border border-slate-700 rounded-xl p-4 transition-all",children:[e.jsx("div",{className:`absolute inset-0 ${d.color} opacity-0 group-hover:opacity-10 transition-opacity`}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(d.icon,{className:`w-8 h-8 ${d.color.replace("bg-","text-")} mb-3`}),e.jsx("p",{className:"text-white font-medium",children:d.label}),e.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"Quick access â†’"})]})]},d.label))}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-6 border-t border-slate-700",children:[{label:"Total Man Hours",value:"12,456",icon:Ut},{label:"Structures Set",value:"45/62",icon:ae},{label:"Cable Pulled",value:"18.5 km",icon:X},{label:"Tests Complete",value:"89%",icon:U}].map(d=>e.jsxs("div",{className:"text-center",children:[e.jsx(d.icon,{className:"w-8 h-8 text-slate-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:d.value}),e.jsx("p",{className:"text-sm text-slate-400",children:d.label})]},d.label))})]})};class Nl{async createProject(t){try{const{data:{user:s}}=await f.auth.getUser();if(!s)throw new Error("Not authenticated");const{data:a,error:n}=await f.from("projects").insert({...t,status:t.status||"planning"}).select().single();if(n)throw n;return a&&await this.addTeamMember(a.id,s.id,"owner"),a}catch(s){return console.error("Error creating project:",s),null}}async getUserProjects(t=!1){try{const{data:{user:s}}=await f.auth.getUser();if(!s)return[];let a=f.from("projects").select(`
          *,
          project_team!inner(
            user_id,
            role,
            status
          )
        `).eq("project_team.user_id",s.id).eq("project_team.status","active");t||(a=a.eq("is_archived",!1));const{data:n,error:l}=await a.order("created_at",{ascending:!1});if(l)throw l;return n||[]}catch(s){return console.error("Error fetching projects:",s),[]}}async getProject(t){try{const{data:s,error:a}=await f.from("projects").select("*").eq("id",t).single();if(a)throw a;return s}catch(s){return console.error("Error fetching project:",s),null}}async archiveProject(t,s=!0){try{const{data:{user:a}}=await f.auth.getUser();if(!a)return!1;const{error:n}=await f.from("projects").update({is_archived:s,archived_at:s?new Date().toISOString():null,archived_by:s?a.id:null}).eq("id",t);if(n)throw n;return!0}catch(a){return console.error("Error archiving project:",a),!1}}async getProjectTeam(t){try{const{data:s,error:a}=await f.from("project_team").select(`
          *,
          user:user_profiles(
            id,
            email,
            first_name,
            last_name,
            job_title,
            photo_url
          )
        `).eq("project_id",t).order("created_at",{ascending:!0});if(a)throw a;return s||[]}catch(s){return console.error("Error fetching project team:",s),[]}}async addTeamMember(t,s,a){try{const{error:n}=await f.from("project_team").insert({project_id:t,user_id:s,role:a,status:"active"});if(n)throw n;return!0}catch(n){return console.error("Error adding team member:",n),!1}}async inviteTeamMember(t,s,a,n){try{const{data:{user:l}}=await f.auth.getUser();if(!l)return null;const{data:x,error:u}=await f.rpc("invite_to_project",{p_project_id:t,p_email:s,p_role:a,p_invited_by:l.id,p_message:n});if(u)throw u;return console.log("Invitation token:",x),x}catch(l){return console.error("Error inviting team member:",l),null}}async acceptInvitation(t){try{const{data:{user:s}}=await f.auth.getUser();if(!s)return!1;const{data:a,error:n}=await f.rpc("accept_project_invitation",{p_invitation_token:t,p_user_id:s.id});if(n)throw n;return a||!1}catch(s){return console.error("Error accepting invitation:",s),!1}}async updateTeamMemberRole(t,s,a){try{const{error:n}=await f.from("project_team").update({role:a}).eq("project_id",t).eq("user_id",s);if(n)throw n;return!0}catch(n){return console.error("Error updating team member role:",n),!1}}async removeTeamMember(t,s){try{const{error:a}=await f.from("project_team").update({status:"inactive"}).eq("project_id",t).eq("user_id",s);if(a)throw a;return!0}catch(a){return console.error("Error removing team member:",a),!1}}async createCrew(t){try{const{data:s,error:a}=await f.from("crew_assignments").insert(t).select().single();if(a)throw a;return s}catch(s){return console.error("Error creating crew:",s),null}}async getProjectCrews(t){try{const{data:s,error:a}=await f.from("crew_assignments").select(`
          *,
          lead:user_profiles!crew_assignments_crew_lead_id_fkey(
            id,
            first_name,
            last_name,
            email
          ),
          members:crew_members(
            *,
            user:user_profiles(
              id,
              first_name,
              last_name,
              email,
              job_title
            )
          )
        `).eq("project_id",t).eq("is_active",!0);if(a)throw a;return s||[]}catch(s){return console.error("Error fetching crews:",s),[]}}async addCrewMember(t,s,a="member"){try{const{data:{user:n}}=await f.auth.getUser();if(!n)return!1;const{error:l}=await f.from("crew_members").insert({crew_id:t,user_id:s,role:a,assigned_by:n.id});if(l)throw l;return!0}catch(n){return console.error("Error adding crew member:",n),!1}}async removeCrewMember(t,s){try{const{error:a}=await f.from("crew_members").update({is_active:!1,end_date:new Date().toISOString().split("T")[0]}).eq("crew_id",t).eq("user_id",s);if(a)throw a;return!0}catch(a){return console.error("Error removing crew member:",a),!1}}async getUserProjectRole(t){try{const{data:{user:s}}=await f.auth.getUser();if(!s)return null;const{data:a,error:n}=await f.from("project_team").select("role").eq("project_id",t).eq("user_id",s.id).eq("status","active").single();if(n)throw n;return(a==null?void 0:a.role)||null}catch(s){return console.error("Error fetching user role:",s),null}}async canManageProject(t){const s=await this.getUserProjectRole(t);return s!==null&&["owner","project_manager","superintendent"].includes(s)}async canManageCrews(t){const s=await this.getUserProjectRole(t);return s!==null&&["owner","project_manager","superintendent","foreman"].includes(s)}}const Y=new Nl,kl=({onBack:r,onProjectCreated:t})=>{const[s,a]=h.useState({project_number:"",name:"",description:"",project_type:"mixed",voltage_class:"",contract_type:"lump_sum",start_date:"",end_date:"",location:{address:"",city:"",state:"",zip:"",coordinates:{lat:0,lng:0}}}),[n,l]=h.useState(!1),[x,u]=h.useState(null),c=async i=>{i.preventDefault(),l(!0),u(null);try{const g=await Y.createProject({...s,location:s.location,status:"planning"});g?t(g):u("Failed to create project")}catch(g){u(g.message||"An error occurred")}finally{l(!1)}},m=["69kV","115kV","138kV","161kV","230kV","345kV","500kV","765kV"],d=[{value:"lump_sum",label:"Lump Sum"},{value:"unit_price",label:"Unit Price"},{value:"time_materials",label:"Time & Materials"},{value:"cost_plus",label:"Cost Plus"}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-6 mb-6 border border-gray-700/50",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(Xe,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center",children:e.jsx(ae,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Create New Project"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Define project details and specifications"})]})]})]})})}),e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[x&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-4 flex items-center space-x-2",children:[e.jsx(te,{className:"w-5 h-5 text-red-400"}),e.jsx("span",{className:"text-red-400",children:x})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-700/50",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx(Z,{className:"w-5 h-5 mr-2 text-amber-500"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:["Project Number ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:s.project_number,onChange:i=>a({...s,project_number:i.target.value}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",placeholder:"PRJ-2024-001"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:["Project Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:s.name,onChange:i=>a({...s,name:i.target.value}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",placeholder:"138kV Substation Upgrade"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:i=>a({...s,description:i.target.value}),rows:3,className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",placeholder:"Project scope and objectives..."})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-700/50",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx(X,{className:"w-5 h-5 mr-2 text-amber-500"}),"Technical Specifications"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:["Project Type ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:s.project_type,onChange:i=>a({...s,project_type:i.target.value}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",children:[e.jsx("option",{value:"transmission",children:"Transmission"}),e.jsx("option",{value:"distribution",children:"Distribution"}),e.jsx("option",{value:"substation",children:"Substation"}),e.jsx("option",{value:"mixed",children:"Mixed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Voltage Class"}),e.jsxs("select",{value:s.voltage_class,onChange:i=>a({...s,voltage_class:i.target.value}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",children:[e.jsx("option",{value:"",children:"Select voltage"}),m.map(i=>e.jsx("option",{value:i,children:i},i))]})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-700/50",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx(ee,{className:"w-5 h-5 mr-2 text-amber-500"}),"Schedule & Contract"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:s.start_date,onChange:i=>a({...s,start_date:i.target.value}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:s.end_date,onChange:i=>a({...s,end_date:i.target.value}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Contract Type"}),e.jsx("select",{value:s.contract_type,onChange:i=>a({...s,contract_type:i.target.value}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",children:d.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-700/50",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx(Qe,{className:"w-5 h-5 mr-2 text-amber-500"}),"Location"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Address"}),e.jsx("input",{type:"text",value:s.location.address,onChange:i=>a({...s,location:{...s.location,address:i.target.value}}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",placeholder:"1234 Main St"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"City"}),e.jsx("input",{type:"text",value:s.location.city,onChange:i=>a({...s,location:{...s.location,city:i.target.value}}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",placeholder:"City"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"State"}),e.jsx("input",{type:"text",value:s.location.state,onChange:i=>a({...s,location:{...s.location,state:i.target.value}}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",placeholder:"State"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"ZIP"}),e.jsx("input",{type:"text",value:s.location.zip,onChange:i=>a({...s,location:{...s.location,zip:i.target.value}}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",placeholder:"12345"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:r,className:"px-6 py-3 bg-gray-700 rounded-xl font-medium text-white hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 rounded-xl font-semibold text-white hover:shadow-lg hover:shadow-amber-500/25 transition-all duration-200 flex items-center space-x-2 disabled:opacity-50",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Creating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(yr,{className:"w-5 h-5"}),e.jsx("span",{children:"Create Project"})]})})]})]})]})})},_l=({project:r,userRole:t,onBack:s,onManageCrews:a})=>{const[n,l]=h.useState([]),[x,u]=h.useState(!0),[c,m]=h.useState(!1),[d,i]=h.useState(null),[g,y]=h.useState({email:"",role:"worker",message:""}),[w,k]=h.useState(!1),S=[{value:"owner",label:"Owner",color:"text-purple-400"},{value:"project_manager",label:"Project Manager",color:"text-blue-400"},{value:"superintendent",label:"Superintendent",color:"text-green-400"},{value:"foreman",label:"Foreman",color:"text-yellow-400"},{value:"crew_lead",label:"Crew Lead",color:"text-orange-400"},{value:"worker",label:"Worker",color:"text-gray-400"},{value:"safety_officer",label:"Safety Officer",color:"text-red-400"},{value:"qc_inspector",label:"QC Inspector",color:"text-cyan-400"},{value:"admin",label:"Admin",color:"text-pink-400"},{value:"viewer",label:"Viewer",color:"text-gray-400"}],P=t&&["owner","project_manager","superintendent"].includes(t),C=t&&["owner","project_manager","superintendent","foreman"].includes(t);h.useEffect(()=>{I()},[r.id]);const I=async()=>{u(!0);const o=await Y.getProjectTeam(r.id);l(o),u(!1)},_=async()=>{if(!g.email)return;k(!0);const o=await Y.inviteTeamMember(r.id,g.email,g.role,g.message);o&&(console.log("Invitation sent with token:",o),alert(`Invitation sent to ${g.email}! They will receive an email to join the project.`),m(!1),y({email:"",role:"worker",message:""}),I()),k(!1)},v=async o=>{var p,N;o.user_id&&window.confirm(`Remove ${(p=o.user)==null?void 0:p.first_name} ${(N=o.user)==null?void 0:N.last_name} from the project?`)&&await Y.removeTeamMember(r.id,o.user_id)&&I()},E=async(o,p)=>{if(!o.user_id)return;await Y.updateTeamMemberRole(r.id,o.user_id,p)&&I()},O=o=>{const p=S.find(N=>N.value===o);return(p==null?void 0:p.color)||"text-gray-400"},L=o=>{const p=S.find(N=>N.value===o);return(p==null?void 0:p.label)||o},V=o=>{switch(o){case"active":return e.jsx(U,{className:"w-4 h-4 text-green-400"});case"pending":return e.jsx(pe,{className:"w-4 h-4 text-yellow-400"});case"inactive":return e.jsx(te,{className:"w-4 h-4 text-red-400"});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-4",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-6 mb-6 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(Xe,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:r.name}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Team Management â€¢ ",r.project_number]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[C&&e.jsxs("button",{onClick:a,className:"px-4 py-2 bg-gray-700 rounded-xl font-medium text-white hover:bg-gray-600 transition-colors flex items-center space-x-2",children:[e.jsx(W,{className:"w-5 h-5"}),e.jsx("span",{children:"Manage Crews"})]}),P&&e.jsxs("button",{onClick:()=>m(!0),className:"px-5 py-2.5 bg-gradient-to-r from-amber-500 to-orange-600 rounded-xl font-semibold text-white hover:shadow-lg hover:shadow-amber-500/25 transition-all duration-200 flex items-center space-x-2",children:[e.jsx(Vt,{className:"w-5 h-5"}),e.jsx("span",{children:"Invite Member"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-xl p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total Team"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:n.length})]}),e.jsx(W,{className:"w-8 h-8 text-amber-400"})]})}),e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-xl p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:n.filter(o=>o.status==="active").length})]}),e.jsx(Ur,{className:"w-8 h-8 text-green-400"})]})}),e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-xl p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:n.filter(o=>o.status==="pending").length})]}),e.jsx(pe,{className:"w-8 h-8 text-yellow-400"})]})}),e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-xl p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Your Role"}),e.jsx("p",{className:"text-lg font-bold text-white",children:t?L(t):"N/A"})]}),e.jsx(F,{className:"w-8 h-8 text-purple-400"})]})})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl border border-gray-700/50 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Team Members"})}),x?e.jsx("div",{className:"p-8 text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto"})}):n.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(W,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No team members yet"}),P&&e.jsx("button",{onClick:()=>m(!0),className:"mt-4 px-4 py-2 bg-amber-500 rounded-lg text-white hover:bg-amber-600 transition-colors",children:"Invite First Member"})]}):e.jsx("div",{className:"divide-y divide-gray-700",children:n.map(o=>{var p,N;return e.jsx("div",{className:"p-4 hover:bg-gray-700/30 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold",children:o.user?`${o.user.first_name[0]}${o.user.last_name[0]}`:(p=o.invited_email)==null?void 0:p[0].toUpperCase()})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"font-semibold text-white",children:o.user?`${o.user.first_name} ${o.user.last_name}`:o.invited_email}),V(o.status)]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[e.jsx("span",{className:`text-sm ${O(o.role)}`,children:L(o.role)}),((N=o.user)==null?void 0:N.job_title)&&e.jsxs("span",{className:"text-sm text-gray-400",children:["â€¢ ",o.user.job_title]}),o.status==="pending"&&e.jsx("span",{className:"text-xs text-yellow-400",children:"â€¢ Invitation Pending"})]})]})]}),P&&o.role!=="owner"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("select",{value:o.role,onChange:A=>E(o,A.target.value),className:"px-3 py-1 bg-gray-700 border border-gray-600 rounded-lg text-sm text-white focus:border-amber-500 focus:outline-none",disabled:!o.user_id,children:S.filter(A=>A.value!=="owner").map(A=>e.jsx("option",{value:A.value,children:A.label},A.value))}),e.jsx("button",{onClick:()=>v(o),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",disabled:!o.user_id,children:e.jsx(zt,{className:"w-4 h-4 text-red-400"})})]})]})},o.id)})})]})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 max-w-md w-full border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Invite Team Member"}),e.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(K,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:g.email,onChange:o=>y({...g,email:o.target.value}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",placeholder:"worker@company.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Role"}),e.jsx("select",{value:g.role,onChange:o=>y({...g,role:o.target.value}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",children:S.filter(o=>o.value!=="owner").map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Message (Optional)"}),e.jsx("textarea",{value:g.message,onChange:o=>y({...g,message:o.target.value}),rows:3,className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",placeholder:"Welcome to the team! Looking forward to working with you..."})]}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-3",children:e.jsx("p",{className:"text-sm text-blue-400",children:"An email invitation will be sent to join this project. They'll need to create an account or sign in to accept."})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-gray-700 rounded-xl font-medium text-white hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:_,disabled:!g.email||w,className:"px-5 py-2 bg-gradient-to-r from-amber-500 to-orange-600 rounded-xl font-semibold text-white hover:shadow-lg hover:shadow-amber-500/25 transition-all duration-200 flex items-center space-x-2 disabled:opacity-50",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{children:"Send Invitation"})]})})]})]})]})})]})},Sl=({project:r,userRole:t,onBack:s})=>{const[a,n]=h.useState([]),[l,x]=h.useState([]),[u,c]=h.useState(!0),[m,d]=h.useState(!1),[i,g]=h.useState(!1),[y,w]=h.useState(null),[k,S]=h.useState({crew_name:"",crew_type:"general",description:""}),P=[{value:"electrical",label:"Electrical",icon:X,color:"text-yellow-400"},{value:"civil",label:"Civil",icon:ne,color:"text-gray-400"},{value:"mechanical",label:"Mechanical",icon:rt,color:"text-blue-400"},{value:"general",label:"General",icon:W,color:"text-green-400"},{value:"specialized",label:"Specialized",icon:F,color:"text-purple-400"}],C=t&&["owner","project_manager","superintendent","foreman"].includes(t);h.useEffect(()=>{I(),_()},[r.id]);const I=async()=>{c(!0);const o=await Y.getProjectCrews(r.id);n(o),c(!1)},_=async()=>{const o=await Y.getProjectTeam(r.id);x(o.filter(p=>p.status==="active"))},v=async()=>{if(!k.crew_name)return;const{data:{user:o}}=await f.auth.getUser();if(!o)return;await Y.createCrew({project_id:r.id,crew_lead_id:o.id,crew_name:k.crew_name,crew_type:k.crew_type,description:k.description,is_active:!0})&&(d(!1),S({crew_name:"",crew_type:"general",description:""}),I())},E=async(o,p)=>{if(!y)return;await Y.addCrewMember(y.id,o,p)&&(g(!1),w(null),I())},O=async(o,p)=>{window.confirm("Remove this member from the crew?")&&await Y.removeCrewMember(o,p)&&I()},L=o=>P.find(p=>p.value===o)||P[3],V=o=>{var N;const p=((N=o.members)==null?void 0:N.map(A=>A.user_id))||[];return l.filter(A=>A.user_id&&!p.includes(A.user_id)&&A.user_id!==o.crew_lead_id)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-4",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-6 mb-6 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(Xe,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Crew Management"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[r.name," â€¢ ",r.project_number]})]})]}),C&&e.jsxs("button",{onClick:()=>d(!0),className:"px-5 py-2.5 bg-gradient-to-r from-amber-500 to-orange-600 rounded-xl font-semibold text-white hover:shadow-lg hover:shadow-amber-500/25 transition-all duration-200 flex items-center space-x-2",children:[e.jsx(Nt,{className:"w-5 h-5"}),e.jsx("span",{children:"Create Crew"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-xl p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total Crews"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:a.length})]}),e.jsx(W,{className:"w-8 h-8 text-amber-400"})]})}),e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-xl p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Active Crews"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:a.filter(o=>o.is_active).length})]}),e.jsx(U,{className:"w-8 h-8 text-green-400"})]})}),e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-xl p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total Workers"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:a.reduce((o,p)=>{var N;return o+(((N=p.members)==null?void 0:N.length)||0)},0)})]}),e.jsx(ne,{className:"w-8 h-8 text-blue-400"})]})}),e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-xl p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Avg. Crew Size"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:a.length>0?Math.round(a.reduce((o,p)=>{var N;return o+(((N=p.members)==null?void 0:N.length)||0)},0)/a.length):0})]}),e.jsx(F,{className:"w-8 h-8 text-purple-400"})]})})]}),u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500"})}):a.length===0?e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-12 text-center border border-gray-700/50",children:[e.jsx(W,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Crews Created"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Create crews to organize your workforce"}),C&&e.jsx("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 rounded-xl font-semibold text-white hover:shadow-lg hover:shadow-amber-500/25 transition-all duration-200",children:"Create First Crew"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:a.map(o=>{var A;const p=L(o.crew_type||"general"),N=p.icon;return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-700/50 hover:border-amber-500/30 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-12 h-12 bg-gray-700 rounded-xl flex items-center justify-center ${p.color}`,children:e.jsx(N,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white text-lg",children:o.crew_name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[p.label," Crew"]})]})]}),o.is_active?e.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-medium",children:"Active"}):e.jsx("span",{className:"px-2 py-1 bg-gray-500/20 text-gray-400 rounded-full text-xs font-medium",children:"Inactive"})]}),o.lead&&e.jsxs("div",{className:"mb-4 p-3 bg-gray-700/30 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Crew Lead"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-amber-500 to-orange-600 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-xs font-semibold",children:[o.lead.first_name[0],o.lead.last_name[0]]})}),e.jsxs("span",{className:"text-white font-medium",children:[o.lead.first_name," ",o.lead.last_name]})]})]}),o.description&&e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:o.description}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-300",children:["Members (",((A=o.members)==null?void 0:A.length)||0,")"]}),C&&e.jsx("button",{onClick:()=>{w(o),g(!0)},className:"text-amber-400 hover:text-amber-300 transition-colors",children:e.jsx(Vt,{className:"w-4 h-4"})})]}),o.members&&o.members.length>0?e.jsx("div",{className:"space-y-2",children:o.members.map(j=>{var $,q,B,ce;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-600 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-xs",children:[($=j.user)==null?void 0:$.first_name[0],(q=j.user)==null?void 0:q.last_name[0]]})}),e.jsxs("span",{className:"text-sm text-white",children:[(B=j.user)==null?void 0:B.first_name," ",(ce=j.user)==null?void 0:ce.last_name]}),e.jsxs("span",{className:"text-xs text-gray-400",children:["â€¢ ",j.role]})]}),C&&e.jsx("button",{onClick:()=>O(o.id,j.user_id),className:"text-red-400 hover:text-red-300 transition-colors",children:e.jsx(K,{className:"w-4 h-4"})})]},j.id)})}):e.jsx("p",{className:"text-sm text-gray-500",children:"No members assigned"})]}),e.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-gray-700",children:e.jsx("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(o.created_at).toLocaleDateString()})]})})})]},o.id)})})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 max-w-md w-full border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Create New Crew"}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(K,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Crew Name"}),e.jsx("input",{type:"text",value:k.crew_name,onChange:o=>S({...k,crew_name:o.target.value}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",placeholder:"Alpha Crew"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Crew Type"}),e.jsx("select",{value:k.crew_type,onChange:o=>S({...k,crew_type:o.target.value}),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",children:P.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{value:k.description,onChange:o=>S({...k,description:o.target.value}),rows:3,className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20",placeholder:"Primary installation crew for high voltage equipment..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-gray-700 rounded-xl font-medium text-white hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:v,disabled:!k.crew_name,className:"px-5 py-2 bg-gradient-to-r from-amber-500 to-orange-600 rounded-xl font-semibold text-white hover:shadow-lg hover:shadow-amber-500/25 transition-all duration-200 disabled:opacity-50",children:"Create Crew"})]})]})]})}),i&&y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 max-w-md w-full border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Add to ",y.crew_name]}),e.jsx("button",{onClick:()=>{g(!1),w(null)},className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(K,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Select team members to add to this crew:"}),V(y).length>0?e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:V(y).map(o=>{var p,N,A,j,$;return e.jsxs("button",{onClick:()=>E(o.user_id,"member"),className:"w-full flex items-center justify-between p-3 bg-gray-700/30 rounded-lg hover:bg-gray-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-sm",children:[(p=o.user)==null?void 0:p.first_name[0],(N=o.user)==null?void 0:N.last_name[0]]})}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"text-white font-medium",children:[(A=o.user)==null?void 0:A.first_name," ",(j=o.user)==null?void 0:j.last_name]}),e.jsx("p",{className:"text-xs text-gray-400",children:(($=o.user)==null?void 0:$.job_title)||o.role})]})]}),e.jsx(Nt,{className:"w-5 h-5 text-amber-400"})]},o.id)})}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No available team members to add"}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{g(!1),w(null)},className:"px-4 py-2 bg-gray-700 rounded-xl font-medium text-white hover:bg-gray-600 transition-colors",children:"Close"})})]})]})})]})},Cl=()=>{const[r,t]=h.useState([]),[s,a]=h.useState(null),[n,l]=h.useState("list"),[x,u]=h.useState(!0),[c,m]=h.useState(""),[d,i]=h.useState(!1),[g,y]=h.useState(null);h.useEffect(()=>{w()},[d]),h.useEffect(()=>{s&&k(s.id)},[s]);const w=async()=>{u(!0);const v=await Y.getUserProjects(d);t(v),u(!1)},k=async v=>{const E=await Y.getUserProjectRole(v);y(E)},S=()=>{l("create"),a(null)},P=v=>{w(),a(v),l("team")},C=r.filter(v=>v.name.toLowerCase().includes(c.toLowerCase())||v.project_number.toLowerCase().includes(c.toLowerCase())),I=v=>{switch(v){case"planning":return"text-blue-400 bg-blue-400/10";case"active":return"text-green-400 bg-green-400/10";case"on_hold":return"text-yellow-400 bg-yellow-400/10";case"completed":return"text-gray-400 bg-gray-400/10";default:return"text-gray-400 bg-gray-400/10"}},_=v=>{if(!v)return"text-gray-400";const E=parseInt(v);return E>=500?"text-red-400":E>=230?"text-orange-400":E>=115?"text-yellow-400":"text-green-400"};return n==="create"?e.jsx(kl,{onBack:()=>l("list"),onProjectCreated:P}):n==="team"&&s?e.jsx(_l,{project:s,userRole:g,onBack:()=>l("list"),onManageCrews:()=>l("crews")}):n==="crews"&&s?e.jsx(Sl,{project:s,userRole:g,onBack:()=>l("team")}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-6 mb-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center",children:e.jsx(ae,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Project Management"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Manage your construction projects and teams"})]})]}),e.jsxs("button",{onClick:S,className:"px-5 py-2.5 bg-gradient-to-r from-amber-500 to-orange-600 rounded-xl font-semibold text-white hover:shadow-lg hover:shadow-amber-500/25 transition-all duration-200 flex items-center space-x-2",children:[e.jsx(va,{className:"w-5 h-5"}),e.jsx("span",{children:"New Project"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search projects by name or number...",value:c,onChange:v=>m(v.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20"})]}),e.jsxs("button",{onClick:()=>i(!d),className:`px-4 py-2 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2 ${d?"bg-gray-600 text-white":"bg-gray-700/50 text-gray-400 hover:text-white"}`,children:[e.jsx(jt,{className:"w-5 h-5"}),e.jsxs("span",{children:[d?"Hide":"Show"," Archived"]})]})]})]}),x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500"})}):C.length===0?e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-12 text-center border border-gray-700/50",children:[e.jsx(Na,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Projects Found"}),e.jsx("p",{className:"text-gray-400 mb-6",children:c?"Try adjusting your search terms":"Get started by creating your first project"}),!c&&e.jsx("button",{onClick:S,className:"px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 rounded-xl font-semibold text-white hover:shadow-lg hover:shadow-amber-500/25 transition-all duration-200",children:"Create First Project"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(v=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-700/50 hover:border-amber-500/30 transition-all duration-200 group cursor-pointer",onClick:()=>{a(v),l("team")},children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(X,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white group-hover:text-amber-400 transition-colors",children:v.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["#",v.project_number]})]})]}),e.jsx("div",{className:"relative",children:e.jsx("button",{onClick:E=>{E.stopPropagation()},className:"p-1 hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(qt,{className:"w-5 h-5 text-gray-400"})})})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Type"}),e.jsx("span",{className:"text-white capitalize",children:v.project_type.replace("_"," ")})]}),v.voltage_class&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Voltage"}),e.jsx("span",{className:_(v.voltage_class),children:v.voltage_class})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I(v.status)}`,children:v.status.replace("_"," ").toUpperCase()})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4 text-sm",children:e.jsxs("div",{className:"flex items-center space-x-1 text-gray-400",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:v.start_date?new Date(v.start_date).toLocaleDateString():"TBD"})]})}),e.jsx(ra,{className:"w-5 h-5 text-gray-400 group-hover:text-amber-400 transition-colors"})]})}),v.is_archived&&e.jsx("div",{className:"absolute top-4 right-4 px-2 py-1 bg-gray-700 rounded-full text-xs text-gray-300",children:"Archived"})]},v.id))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-8",children:[e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-xl p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Active Projects"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:r.filter(v=>v.status==="active"&&!v.is_archived).length})]}),e.jsx(U,{className:"w-8 h-8 text-green-400"})]})}),e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-xl p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Planning"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:r.filter(v=>v.status==="planning"&&!v.is_archived).length})]}),e.jsx(pe,{className:"w-8 h-8 text-blue-400"})]})}),e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-xl p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"On Hold"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:r.filter(v=>v.status==="on_hold"&&!v.is_archived).length})]}),e.jsx(te,{className:"w-8 h-8 text-yellow-400"})]})}),e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-xl p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Archived"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:r.filter(v=>v.is_archived).length})]}),e.jsx(jt,{className:"w-8 h-8 text-gray-400"})]})})]})]})})};class Ml{constructor(){Se(this,"costCodes",[]);Se(this,"initialized",!1)}async initialize(){if(!this.initialized)try{await this.loadCostCodes(),this.initialized=!0,console.log("OCR Service initialized successfully")}catch(t){throw console.error("Failed to initialize OCR service:",t),t}}async loadCostCodes(){try{const{data:t,error:s}=await f.from("company_cost_codes").select("*").eq("is_active",!0).order("code");if(s)throw s;this.costCodes=t||[],console.log(`Loaded ${this.costCodes.length} cost codes`)}catch(t){console.error("Failed to load cost codes:",t)}}async processImage(t){this.initialized||await this.initialize();try{console.log("Processing image with mock OCR...");const s=`RECEIPT
HOME DEPOT
123 MAIN ST
ANYTOWN, USA 12345
DATE: ${new Date().toLocaleDateString()}

ITEMS:
HAMMER                 $25.99
NAILS (BOX)           $12.50
SAFETY GLOVES         $15.00

SUBTOTAL              $53.49
TAX                    $4.28
TOTAL                 $57.77

THANK YOU FOR YOUR PURCHASE`,a=s.split(`
`).filter(x=>x.trim()),n=this.extractDataFromText(s,a),l=this.matchCostCode(s);return l&&(n.costCode=l.code),{text:s,confidence:.85,lines:a,extractedData:n}}catch(s){throw console.error("OCR processing failed:",s),s}}extractDataFromText(t,s){const a={};t.toUpperCase();for(let c=0;c<Math.min(5,s.length);c++){const m=s[c];if(m.length>3&&!this.isNumeric(m)&&!this.isDate(m)){a.vendor=m.trim();break}}const n=[/TOTAL[:\s]+\$?([\d,]+\.?\d*)/i,/AMOUNT[:\s]+\$?([\d,]+\.?\d*)/i,/SUBTOTAL[:\s]+\$?([\d,]+\.?\d*)/i,/\$\s*([\d,]+\.?\d+)/,/USD\s*([\d,]+\.?\d+)/i];for(const c of n){const m=t.match(c);if(m){const d=parseFloat(m[1].replace(/,/g,""));if(!isNaN(d)){a.amount=d;break}}}const l=[/(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})/,/(\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2})/,/(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+\d{1,2},?\s+\d{4}/i,/\d{1,2}\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+\d{4}/i];for(const c of l){const m=t.match(c);if(m){a.date=m[0];break}}const x=[],u=/^[\s\S]*?\$?\s*[\d,]+\.?\d*$/;for(const c of s)if(u.test(c)&&c.length>5){const m=c.replace(/\$?\s*[\d,]+\.?\d*$/,"").trim();m.length>2&&x.push(m)}return x.length>0&&(a.items=x),a}matchCostCode(t){const s=t.toUpperCase();for(const n of this.costCodes)if(s.includes(n.code))return n;for(const n of this.costCodes)if(n.items&&n.items.length>0){for(const l of n.items)if(s.includes(l.toUpperCase()))return n}const a={"98-1300":["MEAL","LUNCH","DINNER","BREAKFAST","RESTAURANT","FOOD"],"98-1500":["HOTEL","MOTEL","LODGING","INN","SUITES"],"98-1650":["UBER","LYFT","TAXI","CAB"],"98-2100":["GAS","FUEL","DIESEL","SHELL","EXXON","CHEVRON","BP"],"98-4500":["TOOLS","HARDWARE","HOME DEPOT","LOWES","ACE"],"98-6000":["SAFETY","PPE","GLOVES","GLASSES","FIRST AID"]};for(const[n,l]of Object.entries(a))for(const x of l)if(s.includes(x)){const u=this.costCodes.find(c=>c.code===n);if(u)return u}return null}isNumeric(t){return/^\d+$/.test(t.trim())}isDate(t){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(t)||/(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/i.test(t)}async enhanceWithAI(t){const s={...t};if(!s.extractedData.vendor&&t.lines.length>0){const a=[/^(THE\s+)?[\w\s&']+\s+(INC|LLC|CORP|CO|COMPANY)/i,/^[\w\s&']+\s+(STORE|MARKET|SHOP|RESTAURANT|HOTEL)/i];for(const n of t.lines.slice(0,5)){for(const l of a)if(l.test(n)){s.extractedData.vendor=n.trim();break}if(s.extractedData.vendor)break}}return s}async cleanup(){this.initialized=!1}async uploadReceiptImage(t,s,a){const n=`receipts/${a}/${s}/${Date.now()}_${t.name}`,{data:l,error:x}=await f.storage.from("receipts").upload(n,t,{cacheControl:"3600",upsert:!1});if(x)throw console.error("Failed to upload receipt image:",x),x;const{data:{publicUrl:u}}=f.storage.from("receipts").getPublicUrl(n);return u}async createThumbnail(t,s=200){return new Promise((a,n)=>{const l=new FileReader;l.onload=x=>{var c;const u=new Image;u.onload=()=>{const m=document.createElement("canvas"),d=m.getContext("2d"),i=s/u.width;m.width=s,m.height=u.height*i,d.drawImage(u,0,0,m.width,m.height);const g=m.toDataURL("image/jpeg",.7);a(g)},u.onerror=n,u.src=(c=x.target)==null?void 0:c.result},l.onerror=n,l.readAsDataURL(t)})}}const we=new Ml;class Al{async createReceipt(t){try{const{data:{user:s}}=await f.auth.getUser();if(!s)throw new Error("No authenticated user");const{data:a,error:n}=await f.from("receipts").insert({...t,user_id:s.id,status:"processing"}).select().single();if(n)throw n;return a}catch(s){return console.error("Failed to create receipt:",s),null}}async getCostCodes(){try{const{data:t,error:s}=await f.from("company_cost_codes").select("*").eq("is_active",!0).order("code");if(s)throw s;return t||[]}catch(t){return console.error("Failed to fetch cost codes:",t),[]}}async getReceipts(t,s){try{let a=f.from("receipts").select(`
          *,
          cost_code:company_cost_codes(code, name, category),
          project:projects(name, project_number),
          user:user_profiles(first_name, last_name)
        `).order("receipt_date",{ascending:!1});t&&(a=a.eq("project_id",t)),s&&(a=a.eq("user_id",s));const{data:n,error:l}=await a;if(l)throw l;return n||[]}catch(a){return console.error("Failed to fetch receipts:",a),[]}}async getReceipt(t){try{const{data:s,error:a}=await f.from("receipts").select(`
          *,
          cost_code:company_cost_codes(*),
          project:projects(*),
          user:user_profiles(*)
        `).eq("id",t).single();if(a)throw a;return s}catch(s){return console.error("Failed to fetch receipt:",s),null}}async updateReceipt(t,s){try{const{data:a,error:n}=await f.from("receipts").update({...s,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return a}catch(a){return console.error("Failed to update receipt:",a),null}}async updateReceiptWithOCR(t,s,a,n){var l;try{const x={ocr_text:s,ocr_confidence:a,ocr_processed:!0,status:"pending",extracted_vendor:n.vendor,extracted_amount:(l=n.amount)==null?void 0:l.toString(),extracted_date:n.date,extracted_items:n.items};if(n.vendor&&(x.vendor_name=n.vendor),n.amount&&(x.total_amount=n.amount,x.amount=n.amount),n.date){const u=this.parseDate(n.date);u&&(x.receipt_date=u)}return this.updateReceipt(t,x)}catch(x){return console.error("Failed to update receipt with OCR:",x),null}}parseDate(t){try{const s=new Date(t);if(!isNaN(s.getTime()))return s.toISOString().split("T")[0];const a=t.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})/);if(a){const[l,x,u,c]=a;return`${c}-${x.padStart(2,"0")}-${u.padStart(2,"0")}`}const n=t.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})/);if(n){const[l,x,u,c]=n;return`${c}-${u.padStart(2,"0")}-${x.padStart(2,"0")}`}return null}catch{return null}}async approveReceipt(t){try{const{data:{user:s}}=await f.auth.getUser();if(!s)throw new Error("No authenticated user");const{error:a}=await f.from("receipts").update({status:"approved",approved_by:s.id,approved_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",t);if(a)throw a;return!0}catch(s){return console.error("Failed to approve receipt:",s),!1}}async rejectReceipt(t,s){try{const{error:a}=await f.from("receipts").update({status:"rejected",rejection_reason:s,updated_at:new Date().toISOString()}).eq("id",t);if(a)throw a;return!0}catch(a){return console.error("Failed to reject receipt:",a),!1}}async deleteReceipt(t){try{const{error:s}=await f.from("receipts").delete().eq("id",t);if(s)throw s;return!0}catch(s){return console.error("Failed to delete receipt:",s),!1}}async createExpenseReport(t){try{const{data:{user:s}}=await f.auth.getUser();if(!s)throw new Error("No authenticated user");const{data:a}=await f.rpc("generate_expense_report_number"),{data:n,error:l}=await f.from("expense_reports").insert({...t,user_id:s.id,report_number:a,status:"draft"}).select().single();if(l)throw l;return n}catch(s){return console.error("Failed to create expense report:",s),null}}async addReceiptsToReport(t,s){try{const a=s.map(l=>({expense_report_id:t,receipt_id:l})),{error:n}=await f.from("expense_report_receipts").insert(a);if(n)throw n;return!0}catch(a){return console.error("Failed to add receipts to report:",a),!1}}async getExpenseReports(t,s){try{let a=f.from("expense_reports").select(`
          *,
          project:projects(name, project_number),
          user:user_profiles(first_name, last_name),
          receipts:expense_report_receipts(
            receipt:receipts(*)
          )
        `).order("created_at",{ascending:!1});t&&(a=a.eq("project_id",t)),s&&(a=a.eq("user_id",s));const{data:n,error:l}=await a;if(l)throw l;return n||[]}catch(a){return console.error("Failed to fetch expense reports:",a),[]}}async getCostCodeAnalytics(t,s,a){try{let n=f.from("cost_code_analytics").select(`
          *,
          cost_code:company_cost_codes(code, name, category)
        `).eq("project_id",t).order("total_amount",{ascending:!1});s&&(n=n.gte("month",s)),a&&(n=n.lte("month",a));const{data:l,error:x}=await n;if(x)throw x;return l||[]}catch(n){return console.error("Failed to fetch cost code analytics:",n),[]}}async bulkApproveReceipts(t){try{const{data:{user:s}}=await f.auth.getUser();if(!s)throw new Error("No authenticated user");const{error:a}=await f.from("receipts").update({status:"approved",approved_by:s.id,approved_at:new Date().toISOString(),updated_at:new Date().toISOString()}).in("id",t).eq("status","pending");if(a)throw a;return!0}catch(s){return console.error("Failed to bulk approve receipts:",s),!1}}}const ie=new Al;class Pl{constructor(){Se(this,"defaultRecipient","justincronk@pm.me")}async sendReceiptEmail(t){try{const s=`${t.userName}, ${t.jobNumber} - Pcard Receipt`,a=`
Name: ${t.userName}
Date of Transaction: ${t.transactionDate}
Cost Code: ${t.costCode}
Job Number: ${t.jobNumber}
Vendor: ${t.vendorName}
Amount: $${t.amount.toFixed(2)}

---
This is an automated receipt submission from FieldForge by Cronk Companies LLC.
      `.trim(),n=[];t.enhancedImage?n.push({filename:`receipt_${t.jobNumber}_${Date.now()}.jpg`,content:t.enhancedImage,contentType:"image/jpeg"}):n.push({filename:`receipt_${t.jobNumber}_${Date.now()}.jpg`,content:t.receiptImage,contentType:"image/jpeg"});const l={to:[this.defaultRecipient],cc:t.userEmail?[t.userEmail]:[],subject:s,body:a,attachments:n};return await this.sendEmail(l)}catch(s){return console.error("Failed to send receipt email:",s),!1}}async sendEmail(t){var s,a;try{console.log("ðŸ“§ Email would be sent:",{to:t.to,cc:t.cc,subject:t.subject,attachmentCount:((s=t.attachments)==null?void 0:s.length)||0});const{error:n}=await f.from("email_logs").insert({to_addresses:t.to,cc_addresses:t.cc||[],subject:t.subject,body:t.body,status:"pending",sent_at:new Date().toISOString(),metadata:{attachments:(a=t.attachments)==null?void 0:a.map(l=>({filename:l.filename,contentType:l.contentType,size:l.content instanceof Blob?l.content.size:l.content.length}))}});return n?(console.error("Failed to log email:",n),!1):!0}catch(n){return console.error("Email service error:",n),!1}}configure(t){console.log("Email service configured:",t.provider)}}const Tl=new Pl;class $l{async enhanceReceipt(t){try{const s=new Image,a=URL.createObjectURL(t);return new Promise((n,l)=>{s.onload=async()=>{try{const x=document.createElement("canvas"),u=x.getContext("2d");if(!u)throw new Error("Failed to get canvas context");x.width=s.width,x.height=s.height,u.drawImage(s,0,0);const c=u.getImageData(0,0,x.width,x.height),m=c.data;this.applyAutoLevels(m),this.adjustContrast(m,1.3),this.adjustBrightness(m,1.1),this.sharpen(c,u,x.width,x.height),u.putImageData(c,0,0),x.toBlob(d=>{URL.revokeObjectURL(a),d?n(d):l(new Error("Failed to convert canvas to blob"))},"image/jpeg",.95)}catch(x){URL.revokeObjectURL(a),l(x)}},s.onerror=()=>{URL.revokeObjectURL(a),l(new Error("Failed to load image"))},s.src=a})}catch(s){return console.error("Image enhancement failed:",s),t}}applyAutoLevels(t){let s=255,a=0,n=255,l=0,x=255,u=0;for(let c=0;c<t.length;c+=4)s=Math.min(s,t[c]),a=Math.max(a,t[c]),n=Math.min(n,t[c+1]),l=Math.max(l,t[c+1]),x=Math.min(x,t[c+2]),u=Math.max(u,t[c+2]);for(let c=0;c<t.length;c+=4)t[c]=this.stretchValue(t[c],s,a),t[c+1]=this.stretchValue(t[c+1],n,l),t[c+2]=this.stretchValue(t[c+2],x,u)}stretchValue(t,s,a){return a===s?t:Math.round((t-s)/(a-s)*255)}adjustContrast(t,s){const a=n=>Math.round(((n/255-.5)*s+.5)*255);for(let n=0;n<t.length;n+=4)t[n]=Math.max(0,Math.min(255,a(t[n]))),t[n+1]=Math.max(0,Math.min(255,a(t[n+1]))),t[n+2]=Math.max(0,Math.min(255,a(t[n+2])))}adjustBrightness(t,s){for(let a=0;a<t.length;a+=4)t[a]=Math.max(0,Math.min(255,t[a]*s)),t[a+1]=Math.max(0,Math.min(255,t[a+1]*s)),t[a+2]=Math.max(0,Math.min(255,t[a+2]*s))}sharpen(t,s,a,n){const l=[0,-1,0,-1,5,-1,0,-1,0],x=Math.round(Math.sqrt(l.length)),u=Math.floor(x/2),c=t.data,m=new Uint8ClampedArray(c.length);for(let d=0;d<n;d++)for(let i=0;i<a;i++){const g=(d*a+i)*4;let y=0,w=0,k=0;for(let S=0;S<x;S++)for(let P=0;P<x;P++){const C=d+S-u,I=i+P-u;if(C>=0&&C<n&&I>=0&&I<a){const _=(C*a+I)*4,v=l[S*x+P];y+=c[_]*v,w+=c[_+1]*v,k+=c[_+2]*v}}m[g]=Math.max(0,Math.min(255,y)),m[g+1]=Math.max(0,Math.min(255,w)),m[g+2]=Math.max(0,Math.min(255,k)),m[g+3]=c[g+3]}for(let d=0;d<c.length;d++)c[d]=m[d]}async stampReceipt(t,s){try{const a=new Image,n=URL.createObjectURL(t);return new Promise((l,x)=>{a.onload=async()=>{try{const u=document.createElement("canvas"),c=u.getContext("2d");if(!c)throw new Error("Failed to get canvas context");u.width=a.width,u.height=a.height,c.drawImage(a,0,0);const m=120,d=300,i=20,g=u.width-d-i,y=i;c.fillStyle="rgba(0, 0, 0, 0.7)",c.fillRect(g,y,d,m),c.strokeStyle="#00ff00",c.lineWidth=2,c.strokeRect(g,y,d,m),c.fillStyle="#00ff00",c.font="bold 14px Arial",c.fillText("FIELDFORGE RECEIPT",g+10,y+25),c.font="12px Arial",c.fillStyle="#ffffff",c.fillText(`User: ${s.userName}`,g+10,y+45),c.fillText(`Date: ${s.date}`,g+10,y+65),c.fillText(`Job: ${s.jobNumber}`,g+10,y+85),c.fillText(`Code: ${s.costCode}`,g+10,y+105),s.status&&(c.fillStyle=s.status==="APPROVED"?"#00ff00":"#ffaa00",c.font="bold 12px Arial",c.fillText(s.status,g+d-80,y+105)),u.toBlob(w=>{URL.revokeObjectURL(n),w?l(w):x(new Error("Failed to convert canvas to blob"))},"image/jpeg",.95)}catch(u){URL.revokeObjectURL(n),x(u)}},a.onerror=()=>{URL.revokeObjectURL(n),x(new Error("Failed to load image"))},a.src=n})}catch(a){return console.error("Failed to stamp receipt:",a),t}}}const Pt=new $l,Il=({projectId:r,onSuccess:t,onClose:s})=>{const[a,n]=h.useState("capture"),[l,x]=h.useState(null),[u,c]=h.useState(""),[m,d]=h.useState(null),[i,g]=h.useState(!1),[y,w]=h.useState(""),[k,S]=h.useState(r||""),[P,C]=h.useState(""),[I,_]=h.useState(""),[v,E]=h.useState(""),[O,L]=h.useState(""),[V,o]=h.useState(""),[p,N]=h.useState(""),[A,j]=h.useState([]),[$,q]=h.useState([]),[B,ce]=h.useState(""),[fe,it]=h.useState(!1),ot=h.useRef(null),ct=h.useRef(null);h.useEffect(()=>{Zt(),Kt()},[]);const Zt=async()=>{const M=await Y.getUserProjects();j(M),!k&&M.length>0&&S(M[0].id)},Kt=async()=>{const M=await ie.getCostCodes();q(M)},dt=M=>{var se;const G=(se=M.target.files)==null?void 0:se[0];G&&es(G)},es=M=>{if(!M.type.startsWith("image/")){w("Please select an image file");return}if(M.size>10*1024*1024){w("Image size must be less than 10MB");return}x(M),w("");const G=new FileReader;G.onload=se=>{var xe;c((xe=se.target)==null?void 0:xe.result),n("processing"),ts(M)},G.readAsDataURL(M)},ts=async M=>{g(!0),w("");try{const G=await Pt.enhanceReceipt(M),se=new File([G],M.name,{type:"image/jpeg"});x(se),c(URL.createObjectURL(se)),await we.initialize();const xe=await we.processImage(se),Q=await we.enhanceWithAI(xe);if(d(Q),Q.extractedData.vendor&&_(Q.extractedData.vendor),Q.extractedData.amount&&E(Q.extractedData.amount.toString()),Q.extractedData.date){const de=new Date(Q.extractedData.date);isNaN(de.getTime())||L(de.toISOString().split("T")[0])}if(Q.extractedData.costCode){const de=$.find(le=>le.code===Q.extractedData.costCode);de&&C(de.id)}n("review")}catch(G){console.error("OCR failed:",G),w("Failed to process image. Please try again."),n("capture")}finally{g(!1)}},ss=async()=>{var M,G,se,xe,Q,de;if(!k||!v||!O){w("Please fill in all required fields");return}g(!0),w("");try{const{data:{user:le}}=await f.auth.getUser();if(!le)throw new Error("No authenticated user");const{data:Le}=await f.from("user_profiles").select("first_name, last_name").eq("id",le.id).single(),xt=Le?`${Le.first_name} ${Le.last_name}`:((M=le.email)==null?void 0:M.split("@")[0])||"Unknown User",Oe=A.find(ue=>ue.id===k),ht=(Oe==null?void 0:Oe.project_number)||"UNKNOWN",he=$.find(ue=>ue.id===P),rs=he?`${he.code} - ${he.name}`:"No Code";let be=l;if(l){const ue=await Pt.stampReceipt(l,{userName:xt,date:O,jobNumber:ht,costCode:(he==null?void 0:he.code)||"N/A",status:"PENDING"});be=new File([ue],"stamped_"+l.name,{type:"image/jpeg"})}let ut="",pt="";be&&(ut=await we.uploadReceiptImage(be,le.id,k),pt=await we.createThumbnail(be));const gt=await ie.createReceipt({project_id:k,company_cost_code_id:P||void 0,vendor_name:I,amount:parseFloat(v),total_amount:parseFloat(v),receipt_date:O,image_url:ut,thumbnail_url:pt,description:V,notes:p,ocr_text:m==null?void 0:m.text,ocr_confidence:m==null?void 0:m.confidence,ocr_processed:!0,extracted_vendor:(G=m==null?void 0:m.extractedData)==null?void 0:G.vendor,extracted_amount:(xe=(se=m==null?void 0:m.extractedData)==null?void 0:se.amount)==null?void 0:xe.toString(),extracted_date:(Q=m==null?void 0:m.extractedData)==null?void 0:Q.date,extracted_items:(de=m==null?void 0:m.extractedData)==null?void 0:de.items,status:"pending"});if(gt)await Tl.sendReceiptEmail({userName:xt,userEmail:le.email||"",jobNumber:ht,transactionDate:O,costCode:rs,vendorName:I||"Unknown Vendor",amount:parseFloat(v),receiptImage:l,enhancedImage:be})||console.warn("Email notification failed, but receipt was saved"),t==null||t(gt),mt();else throw new Error("Failed to create receipt")}catch(le){console.error("Failed to save receipt:",le),w("Failed to save receipt. Please try again.")}finally{g(!1)}},mt=()=>{n("capture"),x(null),c(""),d(null),_(""),E(""),L(""),o(""),N(""),C(""),w("")},as=$.filter(M=>M.code.toLowerCase().includes(B.toLowerCase())||M.name.toLowerCase().includes(B.toLowerCase())||M.category.toLowerCase().includes(B.toLowerCase())),qe=$.find(M=>M.id===P);return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-cyan-600 to-purple-600 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Receipt Scanner"}),e.jsxs("p",{className:"text-cyan-100 mt-1",children:[a==="capture"&&"Take a photo or upload receipt",a==="processing"&&"Processing image with OCR...",a==="review"&&"Review and confirm details"]})]}),e.jsx("button",{onClick:s,className:"p-2 text-white/80 hover:text-white transition-colors",children:e.jsx(K,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-100px)]",children:[y&&e.jsxs("div",{className:"mb-4 p-4 bg-red-900/20 border border-red-500/30 rounded-lg flex items-center space-x-2",children:[e.jsx(te,{className:"w-5 h-5 text-red-400"}),e.jsx("span",{className:"text-red-300",children:y})]}),a==="capture"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>{var M;return(M=ct.current)==null?void 0:M.click()},className:"p-8 bg-gray-800 border-2 border-dashed border-gray-600 rounded-xl hover:border-cyan-500 hover:bg-gray-700 transition-all group",children:[e.jsx(Pe,{className:"w-12 h-12 text-gray-400 group-hover:text-cyan-400 mx-auto mb-3"}),e.jsx("span",{className:"text-gray-300 font-medium",children:"Take Photo"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use camera"})]}),e.jsxs("button",{onClick:()=>{var M;return(M=ot.current)==null?void 0:M.click()},className:"p-8 bg-gray-800 border-2 border-dashed border-gray-600 rounded-xl hover:border-purple-500 hover:bg-gray-700 transition-all group",children:[e.jsx(Lr,{className:"w-12 h-12 text-gray-400 group-hover:text-purple-400 mx-auto mb-3"}),e.jsx("span",{className:"text-gray-300 font-medium",children:"Upload Image"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"From gallery"})]})]}),e.jsx("input",{ref:ct,type:"file",accept:"image/*",capture:"environment",onChange:dt,className:"hidden"}),e.jsx("input",{ref:ot,type:"file",accept:"image/*",onChange:dt,className:"hidden"}),e.jsx("div",{className:"p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(at,{className:"w-5 h-5 text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-300 font-semibold",children:"AI-Powered OCR"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Our system will automatically extract vendor, amount, date, and suggest the appropriate cost code"})]})]})})]}),a==="processing"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ge,{className:"w-16 h-16 text-cyan-400 animate-spin mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Processing Receipt"}),e.jsx("p",{className:"text-gray-400",children:"Extracting text and analyzing content..."}),u&&e.jsx("img",{src:u,alt:"Receipt",className:"mt-6 max-w-sm mx-auto rounded-lg shadow-lg"})]}),a==="review"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Be,{className:"w-5 h-5 text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-blue-300 font-medium",children:"Email Notification"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Receipt will be automatically emailed to: ",e.jsx("span",{className:"text-white font-medium",children:"justincronk@pm.me"})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"You will be CC'd on this email"})]})]})}),u&&e.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:e.jsx("img",{src:u,alt:"Receipt",className:"max-w-full h-auto rounded-lg"})}),m&&e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"OCR Confidence"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-32 h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-500 to-purple-500 transition-all",style:{width:`${(m.confidence||0)*100}%`}})}),e.jsxs("span",{className:"text-white text-sm font-medium",children:[((m.confidence||0)*100).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(ae,{className:"w-4 h-4 inline mr-1"}),"Project *"]}),e.jsxs("select",{value:k,onChange:M=>S(M.target.value),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-cyan-500 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Project"}),A.map(M=>e.jsxs("option",{value:M.id,children:[M.name," (",M.project_number,")"]},M.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Ot,{className:"w-4 h-4 inline mr-1"}),"Cost Code"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{onClick:()=>it(!fe),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white cursor-pointer flex items-center justify-between",children:[e.jsx("span",{children:qe?`${qe.code} - ${qe.name}`:"Select Cost Code"}),e.jsx(Ye,{className:"w-4 h-4 text-gray-400"})]}),fe&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-gray-800 border border-gray-700 rounded-lg shadow-xl",children:[e.jsx("div",{className:"p-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(tt,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:B,onChange:M=>ce(M.target.value),placeholder:"Search cost codes...",className:"w-full pl-9 pr-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-cyan-500"})]})}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:as.map(M=>e.jsxs("button",{onClick:()=>{C(M.id),it(!1),ce("")},className:"w-full px-4 py-2 text-left hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"font-medium text-white",children:[M.code," - ",M.name]}),e.jsx("div",{className:"text-xs text-gray-400",children:M.category})]},M.id))})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(ae,{className:"w-4 h-4 inline mr-1"}),"Vendor Name"]}),e.jsx("input",{type:"text",value:I,onChange:M=>_(M.target.value),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-cyan-500 focus:outline-none",placeholder:"e.g. Home Depot"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Re,{className:"w-4 h-4 inline mr-1"}),"Total Amount *"]}),e.jsx("input",{type:"number",value:v,onChange:M=>E(M.target.value),step:"0.01",className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-cyan-500 focus:outline-none",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(ee,{className:"w-4 h-4 inline mr-1"}),"Receipt Date *"]}),e.jsx("input",{type:"date",value:O,onChange:M=>L(M.target.value),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-cyan-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Z,{className:"w-4 h-4 inline mr-1"}),"Description"]}),e.jsx("input",{type:"text",value:V,onChange:M=>o(M.target.value),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-cyan-500 focus:outline-none",placeholder:"Brief description of purchase"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes"}),e.jsx("textarea",{value:p,onChange:M=>N(M.target.value),rows:3,className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-cyan-500 focus:outline-none",placeholder:"Additional notes..."})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:mt,className:"flex-1 px-6 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold text-white transition-colors",children:"Start Over"}),e.jsx("button",{onClick:ss,disabled:i||!k||!v||!O,className:"flex-1 px-6 py-3 bg-gradient-to-r from-cyan-500 to-purple-600 rounded-lg font-semibold text-white hover:shadow-lg hover:shadow-cyan-500/25 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Saving & Emailing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-5 h-5"}),e.jsx("span",{children:"Save & Send Email"})]})})]})]})]})]})})},Dl=({projectId:r})=>{const[t,s]=h.useState([]),[a,n]=h.useState([]),[l,x]=h.useState(!0),[u,c]=h.useState(null),[m,d]=h.useState(!1),[i,g]=h.useState("all"),[y,w]=h.useState(""),[k,S]=h.useState([]),[P,C]=h.useState(null);h.useEffect(()=>{I()},[r]);const I=async()=>{x(!0);try{const[j,$]=await Promise.all([ie.getReceipts(r),ie.getCostCodes()]);if(s(j),n($),r){const q=await ie.getCostCodeAnalytics(r);C(q)}}catch(j){console.error("Failed to load data:",j)}finally{x(!1)}},_=async j=>{await ie.approveReceipt(j)&&I()},v=async j=>{const $=prompt("Please provide a reason for rejection:");$&&await ie.rejectReceipt(j,$)&&I()},E=async()=>{if(k.length===0)return;await ie.bulkApproveReceipts(k)&&(S([]),I())},O=async j=>{if(!confirm("Are you sure you want to delete this receipt?"))return;await ie.deleteReceipt(j)&&I()},L=t.filter(j=>{var B,ce,fe;const $=i==="all"||j.status===i,q=((B=j.vendor_name)==null?void 0:B.toLowerCase().includes(y.toLowerCase()))||((ce=j.description)==null?void 0:ce.toLowerCase().includes(y.toLowerCase()))||((fe=j.receipt_number)==null?void 0:fe.toLowerCase().includes(y.toLowerCase()));return $&&q}),V=L.reduce((j,$)=>j+($.total_amount||$.amount||0),0),o=t.filter(j=>j.status==="pending").length,p=t.filter(j=>j.status==="approved").length,N=j=>{switch(j){case"approved":return"text-green-400 bg-green-900/20";case"rejected":return"text-red-400 bg-red-900/20";case"pending":return"text-yellow-400 bg-yellow-900/20";case"processing":return"text-blue-400 bg-blue-900/20";default:return"text-gray-400 bg-gray-900/20"}},A=j=>{switch(j){case"approved":return e.jsx(U,{className:"w-4 h-4"});case"rejected":return e.jsx(K,{className:"w-4 h-4"});case"pending":return e.jsx(pe,{className:"w-4 h-4"});case"processing":return e.jsx(pe,{className:"w-4 h-4 animate-spin"});default:return e.jsx(te,{className:"w-4 h-4"})}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Receipt Management"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Scan, track, and manage expense receipts"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-purple-600 rounded-lg font-semibold text-white hover:shadow-lg hover:shadow-cyan-500/25 transition-all flex items-center space-x-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),e.jsx("span",{children:"Scan Receipt"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(kt,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Total"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:t.length}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Receipts"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Re,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Amount"})]}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",V.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Total Expenses"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(pe,{className:"w-5 h-5 text-yellow-400"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Pending"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:o}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Awaiting Review"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(U,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Approved"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:p}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Processed"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(tt,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:y,onChange:j=>w(j.target.value),placeholder:"Search receipts...",className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-cyan-500 focus:outline-none"})]}),e.jsxs("select",{value:i,onChange:j=>g(j.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-cyan-500 focus:outline-none",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"processing",children:"Processing"})]}),k.length>0&&e.jsxs("button",{onClick:E,className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg font-semibold text-white transition-colors flex items-center space-x-2",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsxs("span",{children:["Approve (",k.length,")"]})]})]})]}),l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500"})}):L.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-xl",children:[e.jsx(kt,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"No receipts found"}),e.jsx("button",{onClick:()=>d(!0),className:"mt-4 px-6 py-2 bg-cyan-600 hover:bg-cyan-700 rounded-lg text-white transition-colors",children:"Scan Your First Receipt"})]}):e.jsx("div",{className:"bg-gray-800 rounded-xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:k.length===L.length,onChange:j=>{j.target.checked?S(L.map($=>$.id)):S([])},className:"rounded border-gray-600 text-cyan-500 focus:ring-cyan-500"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Cost Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Submitted"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:L.map(j=>{const $=a.find(q=>q.id===j.company_cost_code_id);return e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:k.includes(j.id),onChange:q=>{q.target.checked?S([...k,j.id]):S(k.filter(B=>B!==j.id))},className:"rounded border-gray-600 text-cyan-500 focus:ring-cyan-500"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"text-white",children:new Date(j.receipt_date).toLocaleDateString()})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:j.vendor_name||"Unknown Vendor"}),j.description&&e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:j.description})]})}),e.jsx("td",{className:"px-4 py-3",children:$?e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm",children:$.code}),e.jsx("div",{className:"text-xs text-gray-400",children:$.name})]}):e.jsx("span",{className:"text-gray-500",children:"â€”"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"text-white font-semibold",children:["$",(j.total_amount||j.amount||0).toFixed(2)]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs ${N(j.status)}`,children:[A(j.status),e.jsx("span",{className:"capitalize",children:j.status})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"text-sm text-gray-400",children:lt(new Date(j.created_at),{addSuffix:!0})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>c(j),className:"p-1 text-gray-400 hover:text-cyan-400 transition-colors",children:e.jsx(Ge,{className:"w-4 h-4"})}),j.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>_(j.id),className:"p-1 text-gray-400 hover:text-green-400 transition-colors",children:e.jsx(ta,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>v(j.id),className:"p-1 text-gray-400 hover:text-red-400 transition-colors",children:e.jsx(K,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>O(j.id),className:"p-1 text-gray-400 hover:text-red-400 transition-colors",children:e.jsx(zt,{className:"w-4 h-4"})})]})})]},j.id)})})]})})}),P&&P.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center space-x-2",children:[e.jsx(Ks,{className:"w-6 h-6 text-purple-400"}),e.jsx("span",{children:"Cost Code Analytics"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:P.slice(0,6).map(j=>{const $=a.find(q=>q.id===j.company_cost_code_id);return e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:$==null?void 0:$.code}),e.jsx("div",{className:"text-white font-medium",children:$==null?void 0:$.name})]}),e.jsx(Ot,{className:"w-4 h-4 text-gray-400"})]}),e.jsxs("div",{className:"mt-3 flex items-baseline justify-between",children:[e.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",j.total_amount.toFixed(2)]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[j.receipt_count," receipts"]})]})]},j.id)})})]}),m&&e.jsx(Il,{projectId:r,onSuccess:j=>{d(!1),I()},onClose:()=>d(!1)}),u&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-gray-900 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Receipt Details"}),e.jsx("button",{onClick:()=>c(null),className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(K,{className:"w-6 h-6"})})]}),u.image_url&&e.jsx("img",{src:u.image_url,alt:"Receipt",className:"w-full rounded-lg mb-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Vendor"}),e.jsx("p",{className:"text-white",children:u.vendor_name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Amount"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",(u.total_amount||u.amount||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Date"}),e.jsx("p",{className:"text-white",children:new Date(u.receipt_date).toLocaleDateString()})]}),u.description&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Description"}),e.jsx("p",{className:"text-white",children:u.description})]}),u.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Notes"}),e.jsx("p",{className:"text-white",children:u.notes})]}),u.rejection_reason&&e.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-lg",children:[e.jsx("label",{className:"text-sm text-red-400",children:"Rejection Reason"}),e.jsx("p",{className:"text-red-300",children:u.rejection_reason})]})]})]})})})]})},D=({title:r,icon:t,description:s})=>e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-12 text-center",children:[e.jsx(t,{className:"w-16 h-16 text-amber-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:r}),e.jsx("p",{className:"text-slate-400",children:s}),e.jsx("p",{className:"text-sm text-slate-500 mt-8",children:"Coming Soon - This feature is under development"})]})})}),El=()=>e.jsx(D,{title:"Project Metrics",icon:me,description:"Detailed project performance analytics"}),Rl=()=>e.jsx(D,{title:"Safety Metrics",icon:F,description:"Safety performance and compliance tracking"}),Fl=()=>e.jsx(D,{title:"Daily Operations",icon:ne,description:"Manage daily field activities and reports"}),ql=()=>e.jsx(D,{title:"Crew Management",icon:W,description:"Track crew assignments and productivity"}),Ll=()=>e.jsx(D,{title:"Time Tracking",icon:Ut,description:"Record and manage work hours"}),Ol=()=>e.jsx(D,{title:"Safety Hub",icon:F,description:"Central safety management dashboard"}),Ul=()=>e.jsx(D,{title:"Safety Briefing",icon:F,description:"Conduct and document safety briefings"}),zl=()=>e.jsx(D,{title:"Incident Reporting",icon:oe,description:"Report and track safety incidents"}),Wl=()=>e.jsx(D,{title:"Permit Management",icon:Z,description:"Manage work permits and clearances"}),Vl=()=>e.jsx(D,{title:"Equipment Hub",icon:Fe,description:"Equipment tracking and management"}),Hl=()=>e.jsx(D,{title:"Material Inventory",icon:Fe,description:"Track material stock and usage"}),Bl=()=>e.jsx(D,{title:"Equipment Maintenance",icon:rt,description:"Schedule and track maintenance"}),Jl=()=>e.jsx(D,{title:"QAQC Hub",icon:Ee,description:"Quality control dashboard"}),Xl=()=>e.jsx(D,{title:"Inspection Manager",icon:Ee,description:"Schedule and document inspections"}),Yl=()=>e.jsx(D,{title:"Testing Dashboard",icon:Ee,description:"Equipment testing and results"}),Gl=()=>e.jsx(D,{title:"Document Hub",icon:Z,description:"Central document repository"}),Ql=()=>e.jsx(D,{title:"Drawing Viewer",icon:Z,description:"View and annotate project drawings"}),Zl=()=>e.jsx(D,{title:"Submittal Manager",icon:Z,description:"Manage project submittals"}),Kl=()=>e.jsx(D,{title:"Project Schedule",icon:ee,description:"Master project schedule and milestones"}),ei=()=>e.jsx(D,{title:"3-Week Lookahead",icon:ee,description:"Short-term planning and coordination"}),ti=()=>e.jsx(D,{title:"Outage Coordination",icon:ee,description:"Plan and coordinate system outages"}),si=()=>e.jsx(D,{title:"Weather Dashboard",icon:_e,description:"Weather monitoring and forecasts"}),ai=()=>e.jsx(D,{title:"Environmental Compliance",icon:_e,description:"Environmental monitoring and compliance"}),ri=()=>e.jsx(D,{title:"Team Messaging",icon:Te,description:"Real-time team communication"}),ni=()=>e.jsx(D,{title:"Emergency Alerts",icon:oe,description:"Emergency broadcast system"}),li=()=>e.jsx(D,{title:"3D Project Map",icon:Ze,description:"Interactive 3D project visualization"}),ii=()=>e.jsx(D,{title:"Substation Model",icon:ae,description:"3D substation equipment layout"}),oi=()=>e.jsx(D,{title:"FieldForge AI Assistant",icon:ke,description:"AI-powered construction assistant"}),Qt=()=>e.jsx(D,{title:"Settings",icon:Qt,description:"Application settings and preferences"}),ci=()=>e.jsx(D,{title:"Company Settings",icon:ae,description:"Company configuration and management"}),di=()=>e.jsx(D,{title:"User Profile",icon:W,description:"Manage your profile and preferences"}),mi=()=>e.jsxs("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-orange-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2 z-50 animate-slide-down",children:[e.jsx(Zr,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Offline Mode - Changes will sync when connected"})]}),xi=()=>{const[r,t]=h.useState(!1),[s,a]=h.useState(new Date);return h.useEffect(()=>{const n=setInterval(()=>{t(!0),setTimeout(()=>{t(!1),a(new Date)},2e3)},6e4);return()=>clearInterval(n)},[]),e.jsx("div",{className:"fixed bottom-20 right-4 lg:bottom-4 bg-slate-800/90 backdrop-blur-sm border border-slate-700 rounded-lg px-3 py-2 flex items-center space-x-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"w-4 h-4 text-amber-500 animate-spin"}),e.jsx("span",{className:"text-xs text-slate-400",children:"Syncing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"text-xs text-slate-400",children:["Synced ",Math.round((Date.now()-s.getTime())/6e4),"m ago"]})]})})};function hi(){const[r,t]=h.useState(null),[s,a]=h.useState(!0),[n,l]=h.useState(!navigator.onLine);return h.useEffect(()=>{f.auth.getSession().then(({data:{session:m}})=>{t(m),a(!1)});const{data:{subscription:x}}=f.auth.onAuthStateChange((m,d)=>{t(d)}),u=()=>l(!1),c=()=>l(!0);return window.addEventListener("online",u),window.addEventListener("offline",c),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").catch(console.error),"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),()=>{x.unsubscribe(),window.removeEventListener("online",u),window.removeEventListener("offline",c)}},[]),s?e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"FieldForge"}),e.jsx("p",{className:"text-slate-400 mt-2",children:"Initializing Construction Management System..."})]})}):e.jsx(Ss,{children:e.jsx(cs,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[n&&e.jsx(mi,{}),e.jsxs(ds,{children:[e.jsx(T,{path:"/",element:r?e.jsx(ye,{to:"/dashboard",replace:!0}):e.jsx(nn,{})}),e.jsx(T,{path:"/login",element:r?e.jsx(ye,{to:"/dashboard",replace:!0}):e.jsx(gn,{})}),e.jsx(T,{path:"/signup",element:r?e.jsx(ye,{to:"/dashboard",replace:!0}):e.jsx(fn,{})}),e.jsx(T,{path:"/test-routing",element:e.jsx(ln,{})}),e.jsx(T,{path:"/test-runner",element:e.jsx(pn,{})}),r?e.jsxs(T,{element:e.jsx(jl,{session:r}),children:[e.jsx(T,{path:"/dashboard",element:e.jsx(wl,{})}),e.jsx(T,{path:"/feed",element:e.jsx(hl,{})}),e.jsx(T,{path:"/analytics",element:e.jsx(pl,{})}),e.jsx(T,{path:"/projects",element:e.jsx(Cl,{})}),e.jsx(T,{path:"/metrics/project",element:e.jsx(El,{})}),e.jsx(T,{path:"/metrics/safety",element:e.jsx(Rl,{})}),e.jsx(T,{path:"/field",element:e.jsx(Fl,{})}),e.jsx(T,{path:"/field/crews",element:e.jsx(ql,{})}),e.jsx(T,{path:"/field/time",element:e.jsx(Ll,{})}),e.jsx(T,{path:"/field/receipts",element:e.jsx(Dl,{})}),e.jsx(T,{path:"/safety",element:e.jsx(Ol,{})}),e.jsx(T,{path:"/safety/briefing",element:e.jsx(Ul,{})}),e.jsx(T,{path:"/safety/incidents",element:e.jsx(zl,{})}),e.jsx(T,{path:"/safety/permits",element:e.jsx(Wl,{})}),e.jsx(T,{path:"/equipment",element:e.jsx(Vl,{})}),e.jsx(T,{path:"/equipment/inventory",element:e.jsx(Hl,{})}),e.jsx(T,{path:"/equipment/maintenance",element:e.jsx(Bl,{})}),e.jsx(T,{path:"/qaqc",element:e.jsx(Jl,{})}),e.jsx(T,{path:"/qaqc/inspections",element:e.jsx(Xl,{})}),e.jsx(T,{path:"/qaqc/testing",element:e.jsx(Yl,{})}),e.jsx(T,{path:"/documents",element:e.jsx(Gl,{})}),e.jsx(T,{path:"/documents/drawings",element:e.jsx(Ql,{})}),e.jsx(T,{path:"/documents/submittals",element:e.jsx(Zl,{})}),e.jsx(T,{path:"/schedule",element:e.jsx(Kl,{})}),e.jsx(T,{path:"/schedule/lookahead",element:e.jsx(ei,{})}),e.jsx(T,{path:"/schedule/outages",element:e.jsx(ti,{})}),e.jsx(T,{path:"/weather",element:e.jsx(si,{})}),e.jsx(T,{path:"/environmental",element:e.jsx(ai,{})}),e.jsx(T,{path:"/messages",element:e.jsx(ri,{})}),e.jsx(T,{path:"/alerts",element:e.jsx(ni,{})}),e.jsx(T,{path:"/map",element:e.jsx(li,{})}),e.jsx(T,{path:"/model",element:e.jsx(ii,{})}),e.jsx(T,{path:"/ai",element:e.jsx(oi,{})}),e.jsx(T,{path:"/settings",element:e.jsx(Qt,{})}),e.jsx(T,{path:"/settings/company",element:e.jsx(ci,{})}),e.jsx(T,{path:"/settings/profile",element:e.jsx(di,{})}),e.jsx(T,{path:"*",element:e.jsx(ye,{to:"/dashboard",replace:!0})})]}):e.jsx(T,{path:"*",element:e.jsx(ye,{to:"/",replace:!0})})]}),r&&e.jsx(vl,{}),r&&e.jsx(xi,{}),r&&e.jsx(ul,{})]})})})}Ve.createRoot(document.getElementById("root")).render(e.jsx(ms.StrictMode,{children:e.jsx(hi,{})}));
